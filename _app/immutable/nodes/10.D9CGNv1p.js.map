{"version":3,"file":"10.D9CGNv1p.js","sources":["../../../../../../src/lib/components/auth/Signup.svelte","../../../../../../src/lib/components/auth/MnemonicDisplay.svelte","../../../../../../src/routes/signup/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import { generateNewIdentity } from '$lib/nostr/keys';\n  import { authStore } from '$lib/stores/auth';\n\n  const dispatch = createEventDispatcher<{ next: { mnemonic: string; publicKey: string; privateKey: string } }>();\n\n  let isGenerating = false;\n\n  async function handleCreateAccount() {\n    isGenerating = true;\n    authStore.clearError();\n\n    try {\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const { mnemonic, publicKey, privateKey } = await generateNewIdentity();\n\n      dispatch('next', { mnemonic, publicKey, privateKey });\n    } catch (error) {\n      authStore.setError(error instanceof Error ? error.message : 'Failed to generate keys');\n    } finally {\n      isGenerating = false;\n    }\n  }\n</script>\n\n<div class=\"flex flex-col items-center justify-center min-h-screen p-4 bg-base-200\">\n  <div class=\"card w-full max-w-md bg-base-100 shadow-xl\">\n    <div class=\"card-body\">\n      <h2 class=\"card-title text-2xl justify-center mb-4\">Welcome to Minimoomaa Noir</h2>\n\n      <div class=\"alert alert-info mb-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"stroke-current shrink-0 w-6 h-6\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n        </svg>\n        <span class=\"text-sm\">You'll receive a 12-word recovery phrase. Keep it safe!</span>\n      </div>\n\n      {#if $authStore.error}\n        <div class=\"alert alert-error mb-4\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"stroke-current shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <span>{$authStore.error}</span>\n        </div>\n      {/if}\n\n      <div class=\"card-actions justify-center mt-4\">\n        <button\n          class=\"btn btn-primary btn-lg w-full\"\n          on:click={handleCreateAccount}\n          disabled={isGenerating}\n        >\n          {#if isGenerating}\n            <span class=\"loading loading-spinner\"></span>\n            Generating...\n          {:else}\n            Create Account\n          {/if}\n        </button>\n      </div>\n\n      <div class=\"divider\">OR</div>\n\n      <button\n        class=\"btn btn-ghost btn-sm\"\n        on:click={() => dispatch('next', { mnemonic: '', publicKey: '', privateKey: '' })}\n      >\n        Already have a recovery phrase?\n      </button>\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n\n  export let mnemonic: string;\n\n  const dispatch = createEventDispatcher<{ continue: void }>();\n\n  let hasSaved = false;\n  let copied = false;\n\n  const words = mnemonic.split(' ');\n\n  async function copyToClipboard() {\n    try {\n      await navigator.clipboard.writeText(mnemonic);\n      copied = true;\n      setTimeout(() => { copied = false; }, 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n    }\n  }\n\n  function handleContinue() {\n    if (hasSaved) {\n      dispatch('continue');\n    }\n  }\n</script>\n\n<div class=\"flex flex-col items-center justify-center min-h-screen p-4 bg-base-200\">\n  <div class=\"card w-full max-w-2xl bg-base-100 shadow-xl\">\n    <div class=\"card-body\">\n      <h2 class=\"card-title text-2xl justify-center mb-2\">Your Recovery Phrase</h2>\n\n      <div class=\"alert alert-warning mb-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"stroke-current shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n        </svg>\n        <div class=\"text-sm\">\n          <p class=\"font-bold\">Write this down and keep it safe!</p>\n          <p>This is the ONLY way to recover your account. Never share it with anyone.</p>\n        </div>\n      </div>\n\n      <div class=\"bg-base-200 rounded-lg p-6 mb-4\">\n        <div class=\"grid grid-cols-3 gap-4 sm:grid-cols-4\">\n          {#each words as word, i}\n            <div class=\"flex items-center gap-2 bg-base-100 rounded px-3 py-2 shadow\">\n              <span class=\"text-xs text-base-content/50 font-mono\">{i + 1}.</span>\n              <span class=\"font-medium font-mono\">{word}</span>\n            </div>\n          {/each}\n        </div>\n      </div>\n\n      <div class=\"flex justify-center mb-4\">\n        <button\n          class=\"btn btn-outline btn-sm gap-2\"\n          on:click={copyToClipboard}\n        >\n          {#if copied}\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n            </svg>\n            Copied!\n          {:else}\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\" />\n            </svg>\n            Copy to Clipboard\n          {/if}\n        </button>\n      </div>\n\n      <div class=\"form-control mb-4\">\n        <label class=\"label cursor-pointer justify-center gap-3\">\n          <input\n            type=\"checkbox\"\n            class=\"checkbox checkbox-primary\"\n            bind:checked={hasSaved}\n          />\n          <span class=\"label-text text-base\">I have saved my recovery phrase in a secure location</span>\n        </label>\n      </div>\n\n      <div class=\"card-actions justify-center\">\n        <button\n          class=\"btn btn-primary btn-lg w-full sm:w-auto px-8\"\n          on:click={handleContinue}\n          disabled={!hasSaved}\n        >\n          Continue\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import Signup from '$lib/components/auth/Signup.svelte';\n  import MnemonicDisplay from '$lib/components/auth/MnemonicDisplay.svelte';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n  import { authStore } from '$lib/stores/auth';\n\n  let step = 1;\n  let mnemonic = '';\n  let publicKey = '';\n  let privateKey = '';\n\n  function handleNext(event: CustomEvent<{ mnemonic: string; publicKey: string; privateKey: string }>) {\n    const data = event.detail;\n    if (data.mnemonic) {\n      mnemonic = data.mnemonic;\n      publicKey = data.publicKey;\n      privateKey = data.privateKey;\n      step = 2;\n    } else {\n      goto(`${base}/setup`);\n    }\n  }\n\n  function handleContinue() {\n    authStore.setKeys(publicKey, privateKey, mnemonic);\n    goto(`${base}/chat`);\n  }\n</script>\n\n<svelte:head>\n  <title>Sign Up - Minimoomaa Noir</title>\n</svelte:head>\n\n{#if step === 1}\n  <Signup on:next={handleNext} />\n{:else if step === 2}\n  <MnemonicDisplay {mnemonic} on:continue={handleContinue} />\n{/if}\n"],"names":["t1_value","ctx","insert_hydration","target","div","anchor","append_hydration","svg","path","span","dirty","set_data","t1","if_block0","create_if_block_1","create_if_block","div5","div4","div3","h2","div0","div1","button0","div2","button1","dispatch","createEventDispatcher","isGenerating","handleCreateAccount","authStore","resolve","mnemonic","publicKey","privateKey","generateNewIdentity","error","t0_value","span0","span1","i","div9","div8","div7","label","input","div6","$$props","hasSaved","copied","words","copyToClipboard","handleContinue","step","handleNext","event","data","$$invalidate","goto","base"],"mappings":"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"}