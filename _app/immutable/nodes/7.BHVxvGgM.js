import{s as ke,n as G,d as c,i as P,m as De,g as T,v as fe,j as w,k as he,p as Ee,w as Ie,l as d,c as u,o as $,h as f,r as Ve,a as U,x as _e,b as o,q as Z,y as Me,e as v,f as x,t as A}from"../chunks/KqBazuOQ.js";import{e as pe,u as Se,d as Te}from"../chunks/C0GVxn2f.js";import{S as we,i as Ce}from"../chunks/327BRBa5.js";import{g as ve}from"../chunks/BbCkqOyh.js";import{p as Ne}from"../chunks/B6kj3SMy.js";import{b as me}from"../chunks/BW0F1I6S.js";import{a as Pe}from"../chunks/BdGy27T3.js";const je=!1,He=async({params:r})=>({recipientPubkey:r.pubkey,messages:[]}),Qe=Object.freeze(Object.defineProperty({__proto__:null,load:He,prerender:je},Symbol.toStringTag,{value:"Module"}));function be(r,e,t){const a=r.slice();return a[12]=e[t],a}function Le(r){let e,t,a,i,h="‚Üê Back to Messages",l,s,n,g,k,D=r[5].charAt(0).toUpperCase()+"",y,m,I,p=J(r[5])+"",j,Q,C,N,W,H,L,M,E,X,S,O=r[3]?"Sending...":"Send",B,F,Y,ee;function te(_,b){return _[0].length===0?xe:Ue}let q=te(r),V=q(r);return{c(){e=f("div"),t=f("div"),a=f("div"),i=f("button"),i.textContent=h,l=w(),s=f("div"),n=f("div"),g=f("div"),k=f("span"),y=A(D),m=w(),I=f("h1"),j=A(p),Q=w(),C=f("div"),N=f("div"),V.c(),W=w(),H=f("div"),L=f("div"),M=f("form"),E=f("input"),X=w(),S=f("button"),B=A(O),this.h()},l(_){e=u(_,"DIV",{class:!0});var b=v(e);t=u(b,"DIV",{class:!0});var se=v(t);a=u(se,"DIV",{class:!0});var z=v(a);i=u(z,"BUTTON",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-2onyz5"&&(i.textContent=h),l=T(z),s=u(z,"DIV",{class:!0});var K=v(s);n=u(K,"DIV",{class:!0});var ae=v(n);g=u(ae,"DIV",{class:!0});var le=v(g);k=u(le,"SPAN",{});var re=v(k);y=x(re,D),re.forEach(c),le.forEach(c),ae.forEach(c),m=T(K),I=u(K,"H1",{class:!0});var ne=v(I);j=x(ne,p),ne.forEach(c),K.forEach(c),z.forEach(c),se.forEach(c),Q=T(b),C=u(b,"DIV",{class:!0});var ie=v(C);N=u(ie,"DIV",{class:!0});var oe=v(N);V.l(oe),oe.forEach(c),ie.forEach(c),W=T(b),H=u(b,"DIV",{class:!0});var ce=v(H);L=u(ce,"DIV",{class:!0});var de=v(L);M=u(de,"FORM",{class:!0});var R=v(M);E=u(R,"INPUT",{type:!0,class:!0,placeholder:!0}),X=T(R),S=u(R,"BUTTON",{type:!0,class:!0});var ue=v(S);B=x(ue,O),ue.forEach(c),R.forEach(c),de.forEach(c),ce.forEach(c),b.forEach(c),this.h()},h(){d(i,"class","btn btn-ghost btn-sm mb-2"),d(g,"class","bg-primary text-primary-content rounded-full w-10"),d(n,"class","avatar placeholder"),d(I,"class","text-xl font-bold"),d(s,"class","flex items-center gap-3"),d(a,"class","container mx-auto max-w-2xl"),d(t,"class","bg-base-200 border-b border-base-300 p-4"),d(N,"class","container mx-auto max-w-2xl"),d(C,"class","flex-1 overflow-y-auto p-4 bg-base-100"),d(E,"type","text"),d(E,"class","input input-bordered flex-1"),d(E,"placeholder","Type a message..."),E.disabled=r[3],d(S,"type","submit"),d(S,"class","btn btn-primary"),S.disabled=F=r[3]||!r[1].trim(),d(M,"class","flex gap-2"),d(L,"class","container mx-auto max-w-2xl"),d(H,"class","bg-base-200 border-t border-base-300 p-4"),d(e,"class","flex flex-col h-[calc(100vh-64px)]")},m(_,b){P(_,e,b),o(e,t),o(t,a),o(a,i),o(a,l),o(a,s),o(s,n),o(n,g),o(g,k),o(k,y),o(s,m),o(s,I),o(I,j),o(e,Q),o(e,C),o(C,N),V.m(N,null),r[10](C),o(e,W),o(e,H),o(H,L),o(L,M),o(M,E),_e(E,r[1]),o(M,X),o(M,S),o(S,B),Y||(ee=[Z(i,"click",r[9]),Z(E,"input",r[11]),Z(M,"submit",Me(r[7]))],Y=!0)},p(_,b){b&32&&D!==(D=_[5].charAt(0).toUpperCase()+"")&&U(y,D),b&32&&p!==(p=J(_[5])+"")&&U(j,p),q===(q=te(_))&&V?V.p(_,b):(V.d(1),V=q(_),V&&(V.c(),V.m(N,null))),b&8&&(E.disabled=_[3]),b&2&&E.value!==_[1]&&_e(E,_[1]),b&8&&O!==(O=_[3]?"Sending...":"Send")&&U(B,O),b&10&&F!==(F=_[3]||!_[1].trim())&&(S.disabled=F)},d(_){_&&c(e),V.d(),r[10](null),Y=!1,Ve(ee)}}}function Oe(r){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(a){e=u(a,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-mo2ait"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center h-[calc(100vh-64px)]")},m(a,i){P(a,e,i)},p:G,d(a){a&&c(e)}}}function Ue(r){let e,t=[],a=new Map,i=pe(r[0]);const h=l=>l[12].id;for(let l=0;l<i.length;l+=1){let s=be(r,i,l),n=h(s);a.set(n,t[l]=ge(n,s))}return{c(){e=f("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=u(l,"DIV",{class:!0});var s=v(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(c),this.h()},h(){d(e,"class","space-y-2")},m(l,s){P(l,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(l,s){s&65&&(i=pe(l[0]),t=Se(t,s,h,1,l,i,a,e,Te,ge,null,be))},d(l){l&&c(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function xe(r){let e,t="<p>No messages yet. Start the conversation!</p>";return{c(){e=f("div"),e.innerHTML=t,this.h()},l(a){e=u(a,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-jcsddy"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex items-center justify-center h-full text-base-content/50")},m(a,i){P(a,e,i)},p:G,d(a){a&&c(e)}}}function ge(r,e){let t,a,i=e[12].content+"",h,l,s,n=ye(e[12].created_at)+"",g,k,D;return{key:r,first:null,c(){t=f("div"),a=f("div"),h=A(i),l=w(),s=f("div"),g=A(n),k=w(),this.h()},l(y){t=u(y,"DIV",{class:!0});var m=v(t);a=u(m,"DIV",{class:!0});var I=v(a);h=x(I,i),I.forEach(c),l=T(m),s=u(m,"DIV",{class:!0});var p=v(s);g=x(p,n),p.forEach(c),k=T(m),m.forEach(c),this.h()},h(){d(a,"class","chat-bubble"),d(s,"class","chat-footer opacity-50 text-xs"),d(t,"class",D="chat "+(e[12].pubkey===e[6].publicKey?"chat-end":"chat-start")),this.first=t},m(y,m){P(y,t,m),o(t,a),o(a,h),o(t,l),o(t,s),o(s,g),o(t,k)},p(y,m){e=y,m&1&&i!==(i=e[12].content+"")&&U(h,i),m&1&&n!==(n=ye(e[12].created_at)+"")&&U(g,n),m&65&&D!==(D="chat "+(e[12].pubkey===e[6].publicKey?"chat-end":"chat-start"))&&d(t,"class",D)},d(y){y&&c(t)}}}function Ae(r){let e,t,a;document.title=e="DM with "+J(r[5])+" - Fairfield Nostr";function i(s,n){return s[2]?Oe:Le}let h=i(r),l=h(r);return{c(){t=w(),l.c(),a=fe()},l(s){De("svelte-ggt8r8",document.head).forEach(c),t=T(s),l.l(s),a=fe()},m(s,n){P(s,t,n),l.m(s,n),P(s,a,n)},p(s,[n]){n&32&&e!==(e="DM with "+J(s[5])+" - Fairfield Nostr")&&(document.title=e),h===(h=i(s))&&l?l.p(s,n):(l.d(1),l=h(s),l&&(l.c(),l.m(a.parentNode,a)))},i:G,o:G,d(s){s&&(c(t),c(a)),l.d(s)}}}function ye(r){return new Date(r*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function J(r){return r.slice(0,12)+"..."+r.slice(-8)}function Be(r,e,t){let a,i,h;he(r,Pe,p=>t(6,i=p)),he(r,Ne,p=>t(8,h=p));let l=[],s="",n=!0,g=!1,k;Ee(async()=>{if(!i.isAuthenticated){ve(`${me}/`);return}t(0,l=[]),t(2,n=!1)});async function D(){if(!s.trim()||g)return;t(3,g=!0);const p=s;t(1,s="");try{console.log("Sending DM:",p)}catch(j){console.error("Error sending DM:",j),t(1,s=p)}finally{t(3,g=!1)}}const y=()=>ve(`${me}/dm`);function m(p){Ie[p?"unshift":"push"](()=>{k=p,t(4,k)})}function I(){s=this.value,t(1,s)}return r.$$.update=()=>{r.$$.dirty&256&&t(5,a=h.params.pubkey)},[l,s,n,g,k,a,i,D,h,y,m,I]}class We extends we{constructor(e){super(),Ce(this,e,Be,Ae,ke,{})}}export{We as component,Qe as universal};
//# sourceMappingURL=7.BHVxvGgM.js.map
