import{s as de,n as q,d as c,i as E,b as o,l as f,m as ue,g as D,c as h,e as p,o as G,j as x,h as _,k as fe,p as he,a as C,r as _e,f as H,t as P}from"../chunks/D9KvLAFu.js";import{e as te,u as ve,d as pe}from"../chunks/CZ71Vj_C.js";import{S as me,i as be}from"../chunks/Bq9qkgAl.js";import{g as se}from"../chunks/bfnv6XBb.js";import{b as ae}from"../chunks/D2J3qzGV.js";import{a as ge}from"../chunks/Bywki5mg.js";const ke=!0,ye=async()=>({conversations:[]}),He=Object.freeze(Object.defineProperty({__proto__:null,load:ye,prerender:ke},Symbol.toStringTag,{value:"Module"}));function le(d,e,t){const s=d.slice();return s[5]=e[t],s}function De(d){let e,t=[],s=new Map,a=te(d[0]);const i=n=>n[5].pubkey;for(let n=0;n<a.length;n+=1){let r=le(d,a,n),l=i(r);s.set(l,t[n]=re(l,r))}return{c(){e=_("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=h(n,"DIV",{class:!0});var r=p(e);for(let l=0;l<t.length;l+=1)t[l].l(r);r.forEach(c),this.h()},h(){f(e,"class","space-y-2")},m(n,r){E(n,e,r);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(n,r){r&5&&(a=te(n[0]),t=ve(t,r,i,1,n,a,s,e,pe,re,null,le))},d(n){n&&c(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function xe(d){let e,t='<div class="card-body items-center text-center"><p class="text-base-content/70">No conversations yet. Start chatting!</p></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-19hfe4u"&&(e.innerHTML=t),this.h()},h(){f(e,"class","card bg-base-200")},m(s,a){E(s,e,a)},p:q,d(s){s&&c(e)}}}function Ee(d){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-hu9n30"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex justify-center items-center min-h-[400px]")},m(s,a){E(s,e,a)},p:q,d(s){s&&c(e)}}}function ne(d){let e,t=d[5].unread+"",s;return{c(){e=_("div"),s=P(t),this.h()},l(a){e=h(a,"DIV",{class:!0});var i=p(e);s=H(i,t),i.forEach(c),this.h()},h(){f(e,"class","badge badge-primary badge-sm")},m(a,i){E(a,e,i),o(e,s)},p(a,i){i&1&&t!==(t=a[5].unread+"")&&C(s,t)},d(a){a&&c(e)}}}function re(d,e){let t,s,a,i,n,r,l=e[5].pubkey.charAt(0).toUpperCase()+"",u,g,m,k,M,w=ie(e[5].pubkey)+"",j,$,T,S=oe(e[5].lastMessage.created_at)+"",A,z,I,L=e[5].lastMessage.content+"",N,B,F,Y,J,v=e[5].unread>0&&ne(e);function ce(){return e[3](e[5])}return{key:d,first:null,c(){t=_("button"),s=_("div"),a=_("div"),i=_("div"),n=_("div"),r=_("span"),u=P(l),g=x(),m=_("div"),k=_("div"),M=_("h3"),j=P(w),$=x(),T=_("span"),A=P(S),z=x(),I=_("p"),N=P(L),B=x(),v&&v.c(),F=x(),this.h()},l(y){t=h(y,"BUTTON",{class:!0});var b=p(t);s=h(b,"DIV",{class:!0});var K=p(s);a=h(K,"DIV",{class:!0});var V=p(a);i=h(V,"DIV",{class:!0});var Q=p(i);n=h(Q,"DIV",{class:!0});var R=p(n);r=h(R,"SPAN",{class:!0});var W=p(r);u=H(W,l),W.forEach(c),R.forEach(c),Q.forEach(c),g=D(V),m=h(V,"DIV",{class:!0});var O=p(m);k=h(O,"DIV",{class:!0});var U=p(k);M=h(U,"H3",{class:!0});var X=p(M);j=H(X,w),X.forEach(c),$=D(U),T=h(U,"SPAN",{class:!0});var Z=p(T);A=H(Z,S),Z.forEach(c),U.forEach(c),z=D(O),I=h(O,"P",{class:!0});var ee=p(I);N=H(ee,L),ee.forEach(c),O.forEach(c),B=D(V),v&&v.l(V),V.forEach(c),K.forEach(c),F=D(b),b.forEach(c),this.h()},h(){f(r,"class","text-xl"),f(n,"class","bg-primary text-primary-content rounded-full w-12"),f(i,"class","avatar placeholder"),f(M,"class","font-semibold"),f(T,"class","text-xs text-base-content/60"),f(k,"class","flex justify-between items-start mb-1"),f(I,"class","text-sm text-base-content/70 truncate"),f(m,"class","flex-1 min-w-0"),f(a,"class","flex items-center gap-3"),f(s,"class","card-body p-4"),f(t,"class","card bg-base-200 hover:bg-base-300 transition-base cursor-pointer w-full text-left"),this.first=t},m(y,b){E(y,t,b),o(t,s),o(s,a),o(a,i),o(i,n),o(n,r),o(r,u),o(a,g),o(a,m),o(m,k),o(k,M),o(M,j),o(k,$),o(k,T),o(T,A),o(m,z),o(m,I),o(I,N),o(a,B),v&&v.m(a,null),o(t,F),Y||(J=_e(t,"click",ce),Y=!0)},p(y,b){e=y,b&1&&l!==(l=e[5].pubkey.charAt(0).toUpperCase()+"")&&C(u,l),b&1&&w!==(w=ie(e[5].pubkey)+"")&&C(j,w),b&1&&S!==(S=oe(e[5].lastMessage.created_at)+"")&&C(A,S),b&1&&L!==(L=e[5].lastMessage.content+"")&&C(N,L),e[5].unread>0?v?v.p(e,b):(v=ne(e),v.c(),v.m(a,null)):v&&(v.d(1),v=null)},d(y){y&&c(t),v&&v.d(),Y=!1,J()}}}function Me(d){let e,t,s,a='<h1 class="text-4xl font-bold gradient-text mb-2">Direct Messages</h1> <p class="text-base-content/70">Private encrypted conversations</p>',i;function n(u,g){return u[1]?Ee:u[0].length===0?xe:De}let r=n(d),l=r(d);return{c(){e=x(),t=_("div"),s=_("div"),s.innerHTML=a,i=x(),l.c(),this.h()},l(u){ue("svelte-7qc8wd",document.head).forEach(c),e=D(u),t=h(u,"DIV",{class:!0});var m=p(t);s=h(m,"DIV",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-14jg3ur"&&(s.innerHTML=a),i=D(m),l.l(m),m.forEach(c),this.h()},h(){document.title="Direct Messages - Fairfield Nostr",f(s,"class","mb-6"),f(t,"class","container mx-auto p-4 max-w-2xl")},m(u,g){E(u,e,g),E(u,t,g),o(t,s),o(t,i),l.m(t,null)},p(u,[g]){r===(r=n(u))&&l?l.p(u,g):(l.d(1),l=r(u),l&&(l.c(),l.m(t,null)))},i:q,o:q,d(u){u&&(c(e),c(t)),l.d()}}}function ie(d){return d.slice(0,12)+"..."+d.slice(-8)}function oe(d){const e=new Date(d*1e3),a=(new Date().getTime()-e.getTime())/(1e3*60*60);return a<24?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a<48?"Yesterday":e.toLocaleDateString()}function Te(d,e,t){let s;fe(d,ge,l=>t(4,s=l));let a=[],i=!0;he(async()=>{if(!s.isAuthenticated){se(`${ae}/`);return}t(0,a=[]),t(1,i=!1)});function n(l){se(`${ae}/dm/${l}`)}return[a,i,n,l=>n(l.pubkey)]}class Pe extends me{constructor(e){super(),be(this,e,Te,Me,de,{})}}export{Pe as component,He as universal};
//# sourceMappingURL=6.WBiReqzY.js.map
