{"version":3,"file":"9.DIuh4l-P.js","sources":["../../../../../../src/lib/components/auth/Login.svelte","../../../../../../src/routes/setup/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import { restoreFromMnemonic } from '$lib/nostr/keys';\n  import { authStore } from '$lib/stores/auth';\n\n  const dispatch = createEventDispatcher<{ success: { publicKey: string; privateKey: string } }>();\n\n  let inputMode: 'paste' | 'individual' = 'paste';\n  let pastedMnemonic = '';\n  let wordInputs: string[] = Array(12).fill('');\n  let isRestoring = false;\n  let validationError = '';\n\n  function switchMode(mode: 'paste' | 'individual') {\n    inputMode = mode;\n    validationError = '';\n  }\n\n  async function handleRestore() {\n    isRestoring = true;\n    validationError = '';\n    authStore.clearError();\n\n    try {\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      const mnemonic = inputMode === 'paste'\n        ? pastedMnemonic.trim()\n        : wordInputs.map(w => w.trim().toLowerCase()).join(' ');\n\n      if (!mnemonic || mnemonic.split(' ').length !== 12) {\n        validationError = 'Please enter all 12 words';\n        return;\n      }\n\n      const { publicKey, privateKey } = await restoreFromMnemonic(mnemonic);\n\n      dispatch('success', { publicKey, privateKey });\n    } catch (error) {\n      validationError = error instanceof Error ? error.message : 'Invalid recovery phrase';\n      authStore.setError(validationError);\n    } finally {\n      isRestoring = false;\n    }\n  }\n\n  function handlePaste(event: ClipboardEvent) {\n    event.preventDefault();\n    const text = event.clipboardData?.getData('text') || '';\n    const words = text.trim().toLowerCase().split(/\\s+/);\n\n    if (words.length === 12) {\n      wordInputs = words;\n    }\n  }\n</script>\n\n<div class=\"flex flex-col items-center justify-center min-h-screen p-4 bg-base-200\">\n  <div class=\"card w-full max-w-2xl bg-base-100 shadow-xl\">\n    <div class=\"card-body\">\n      <h2 class=\"card-title text-2xl justify-center mb-4\">Restore Your Account</h2>\n\n      <div class=\"alert alert-info mb-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"stroke-current shrink-0 w-6 h-6\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n        </svg>\n        <span class=\"text-sm\">Enter your 12-word recovery phrase to restore your account</span>\n      </div>\n\n      <div class=\"tabs tabs-boxed mb-4\">\n        <button\n          class=\"tab flex-1\"\n          class:tab-active={inputMode === 'paste'}\n          on:click={() => switchMode('paste')}\n        >\n          Paste Phrase\n        </button>\n        <button\n          class=\"tab flex-1\"\n          class:tab-active={inputMode === 'individual'}\n          on:click={() => switchMode('individual')}\n        >\n          Enter Words\n        </button>\n      </div>\n\n      {#if inputMode === 'paste'}\n        <div class=\"form-control\">\n          <textarea\n            class=\"textarea textarea-bordered h-32 font-mono\"\n            placeholder=\"Paste your 12-word recovery phrase here...\"\n            bind:value={pastedMnemonic}\n            disabled={isRestoring}\n          />\n        </div>\n      {:else}\n        <div class=\"grid grid-cols-2 sm:grid-cols-3 gap-3\" on:paste={handlePaste}>\n          {#each wordInputs as word, i}\n            <div class=\"form-control\">\n              <label class=\"label py-1\">\n                <span class=\"label-text text-xs\">Word {i + 1}</span>\n              </label>\n              <input\n                type=\"text\"\n                class=\"input input-bordered input-sm font-mono\"\n                placeholder={`Word ${i + 1}`}\n                bind:value={wordInputs[i]}\n                disabled={isRestoring}\n                autocomplete=\"off\"\n              />\n            </div>\n          {/each}\n        </div>\n      {/if}\n\n      {#if validationError || $authStore.error}\n        <div class=\"alert alert-error mt-4\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"stroke-current shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <span>{validationError || $authStore.error}</span>\n        </div>\n      {/if}\n\n      <div class=\"card-actions justify-center mt-4\">\n        <button\n          class=\"btn btn-primary btn-lg w-full sm:w-auto px-8\"\n          on:click={handleRestore}\n          disabled={isRestoring}\n        >\n          {#if isRestoring}\n            <span class=\"loading loading-spinner\"></span>\n            Restoring...\n          {:else}\n            Restore Account\n          {/if}\n        </button>\n      </div>\n\n      <div class=\"divider\">OR</div>\n\n      <button\n        class=\"btn btn-ghost btn-sm\"\n        on:click={() => dispatch('success', { publicKey: '', privateKey: '' })}\n      >\n        Create a new account\n      </button>\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import Login from '$lib/components/auth/Login.svelte';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n  import { authStore } from '$lib/stores/auth';\n\n  function handleSuccess(event: CustomEvent<{ publicKey: string; privateKey: string }>) {\n    const { publicKey, privateKey } = event.detail;\n    authStore.setKeys(publicKey, privateKey);\n    goto(`${base}/chat`);\n  }\n</script>\n\n<svelte:head>\n  <title>Login - Fairfield Nostr</title>\n</svelte:head>\n\n<Login on:success={handleSuccess} />\n"],"names":["ctx","i","insert_hydration","target","div","anchor","append_hydration","textarea","t1_value","attr","input","label","span","set_input_value","dirty","svg","path","set_data","t1","create_if_block_2","create_if_block_1","create_if_block","toggle_class","button0","button1","div6","div5","div4","h2","div0","div1","div2","button2","div3","button3","dispatch","createEventDispatcher","inputMode","pastedMnemonic","wordInputs","isRestoring","validationError","switchMode","mode","handleRestore","authStore","resolve","mnemonic","w","publicKey","privateKey","restoreFromMnemonic","error","$$invalidate","handlePaste","event","words","click_handler","click_handler_1","handleSuccess","goto","base"],"mappings":"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"}