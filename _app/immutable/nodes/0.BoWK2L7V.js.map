{"version":3,"file":"0.BoWK2L7V.js","sources":["../../../../../../node_modules/svelte/src/runtime/internal/globals.js","../../../../../../src/routes/+layout.ts","../../../../../../src/lib/stores/pwa.ts","../../../../../../src/lib/utils/pwa-init.ts","../../../../../../src/routes/+layout.svelte"],"sourcesContent":["/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","// Enable prerendering for all pages to create static HTML files\nexport const prerender = true;\n\n// Disable SSR since this is a client-side SPA\nexport const ssr = false;\n","/**\n * PWA state management and utilities\n */\n\nimport { writable, derived, get } from 'svelte/store';\nimport { base } from '$app/paths';\n\n/**\n * Install prompt event store\n */\nexport const installPrompt = writable<BeforeInstallPromptEvent | null>(null);\n\n/**\n * Update available flag\n */\nexport const updateAvailable = writable<boolean>(false);\n\n/**\n * Online/offline status\n */\nexport const isOnline = writable<boolean>(\n  typeof navigator !== 'undefined' ? navigator.onLine : true\n);\n\n/**\n * Service worker registration\n */\nexport const swRegistration = writable<ServiceWorkerRegistration | null>(null);\n\n/**\n * PWA installed status\n */\nexport const isPWAInstalled = writable<boolean>(false);\n\n/**\n * Message queue count\n */\nexport const queuedMessageCount = writable<number>(0);\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt(): Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\n/**\n * Initialize PWA event listeners\n */\nexport function initPWA(): void {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // Listen for online/offline events\n  window.addEventListener('online', () => {\n    isOnline.set(true);\n    triggerBackgroundSync();\n  });\n\n  window.addEventListener('offline', () => {\n    isOnline.set(false);\n  });\n\n  // Capture install prompt\n  window.addEventListener('beforeinstallprompt', (e: Event) => {\n    e.preventDefault();\n    installPrompt.set(e as BeforeInstallPromptEvent);\n  });\n\n  // Detect if already installed\n  window.addEventListener('appinstalled', () => {\n    isPWAInstalled.set(true);\n    installPrompt.set(null);\n  });\n\n  // Check if running as PWA\n  if (window.matchMedia('(display-mode: standalone)').matches) {\n    isPWAInstalled.set(true);\n  }\n\n  // Listen for service worker messages\n  navigator.serviceWorker?.addEventListener('message', (event) => {\n    const { type, count } = event.data;\n\n    if (type === 'SYNC_COMPLETE') {\n      console.log(`[PWA] Background sync completed: ${count} messages`);\n      queuedMessageCount.set(0);\n    }\n  });\n}\n\n/**\n * Trigger PWA install prompt\n */\nexport async function triggerInstall(): Promise<boolean> {\n  const prompt = get(installPrompt);\n\n  if (!prompt) {\n    console.warn('[PWA] Install prompt not available');\n    return false;\n  }\n\n  try {\n    await prompt.prompt();\n    const { outcome } = await prompt.userChoice;\n\n    if (outcome === 'accepted') {\n      isPWAInstalled.set(true);\n      installPrompt.set(null);\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error('[PWA] Install prompt failed:', error);\n    return false;\n  }\n}\n\n/**\n * Register service worker\n */\nexport async function registerServiceWorker(): Promise<ServiceWorkerRegistration | null> {\n  if (typeof navigator === 'undefined' || !('serviceWorker' in navigator)) {\n    console.warn('[PWA] Service workers not supported');\n    return null;\n  }\n\n  try {\n    const swPath = `${base}/service-worker.js`;\n    const swScope = `${base}/`;\n    const registration = await navigator.serviceWorker.register(swPath, {\n      scope: swScope\n    });\n\n    console.log('[PWA] Service worker registered:', registration);\n    swRegistration.set(registration);\n\n    // Check for updates\n    registration.addEventListener('updatefound', () => {\n      const newWorker = registration.installing;\n\n      if (!newWorker) {\n        return;\n      }\n\n      newWorker.addEventListener('statechange', () => {\n        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n          updateAvailable.set(true);\n        }\n      });\n    });\n\n    return registration;\n  } catch (error) {\n    console.error('[PWA] Service worker registration failed:', error);\n    return null;\n  }\n}\n\n/**\n * Update service worker\n */\nexport async function updateServiceWorker(): Promise<void> {\n  const registration = get(swRegistration);\n\n  if (!registration?.waiting) {\n    console.warn('[PWA] No waiting service worker');\n    return;\n  }\n\n  registration.waiting.postMessage({ type: 'SKIP_WAITING' });\n\n  navigator.serviceWorker.addEventListener('controllerchange', () => {\n    window.location.reload();\n  });\n}\n\n/**\n * Queue a message for background sync\n */\nexport async function queueMessage(\n  event: NostrEvent,\n  relayUrls: string[]\n): Promise<void> {\n  const registration = get(swRegistration);\n\n  if (!registration?.active) {\n    throw new Error('Service worker not active');\n  }\n\n  const message = {\n    id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    timestamp: Date.now(),\n    event,\n    relayUrls\n  };\n\n  return new Promise((resolve, reject) => {\n    const messageChannel = new MessageChannel();\n\n    messageChannel.port1.onmessage = (event) => {\n      if (event.data.success) {\n        queuedMessageCount.update(n => n + 1);\n        resolve();\n      } else {\n        reject(new Error(event.data.error));\n      }\n    };\n\n    registration.active.postMessage(\n      { type: 'QUEUE_MESSAGE', payload: message },\n      [messageChannel.port2]\n    );\n  });\n}\n\n/**\n * Get queued message count\n */\nexport async function getQueuedMessages(): Promise<QueuedMessage[]> {\n  const registration = get(swRegistration);\n\n  if (!registration?.active) {\n    return [];\n  }\n\n  return new Promise((resolve, reject) => {\n    const messageChannel = new MessageChannel();\n\n    messageChannel.port1.onmessage = (event) => {\n      if (event.data.messages) {\n        queuedMessageCount.set(event.data.messages.length);\n        resolve(event.data.messages);\n      } else {\n        reject(new Error(event.data.error));\n      }\n    };\n\n    registration.active.postMessage(\n      { type: 'GET_QUEUE' },\n      [messageChannel.port2]\n    );\n  });\n}\n\n/**\n * Clear message queue\n */\nexport async function clearMessageQueue(): Promise<void> {\n  const registration = get(swRegistration);\n\n  if (!registration?.active) {\n    return;\n  }\n\n  return new Promise((resolve, reject) => {\n    const messageChannel = new MessageChannel();\n\n    messageChannel.port1.onmessage = (event) => {\n      if (event.data.success) {\n        queuedMessageCount.set(0);\n        resolve();\n      } else {\n        reject(new Error(event.data.error));\n      }\n    };\n\n    registration.active.postMessage(\n      { type: 'CLEAR_QUEUE' },\n      [messageChannel.port2]\n    );\n  });\n}\n\n/**\n * Trigger background sync\n */\nexport async function triggerBackgroundSync(): Promise<void> {\n  const registration = get(swRegistration);\n\n  if (!registration || !('sync' in registration)) {\n    console.warn('[PWA] Background sync not supported');\n    return;\n  }\n\n  try {\n    await (registration as any).sync.register('sync-messages');\n    console.log('[PWA] Background sync registered');\n  } catch (error) {\n    console.error('[PWA] Background sync failed:', error);\n  }\n}\n\n/**\n * Check if PWA can be installed\n */\nexport const canInstall = derived(\n  [installPrompt, isPWAInstalled],\n  ([$installPrompt, $isPWAInstalled]) =>\n    $installPrompt !== null && !$isPWAInstalled\n);\n\n/**\n * Nostr event interface\n */\ninterface NostrEvent {\n  kind: number;\n  created_at: number;\n  tags: string[][];\n  content: string;\n  pubkey: string;\n  id?: string;\n  sig?: string;\n}\n\n/**\n * Queued message interface\n */\ninterface QueuedMessage {\n  id: string;\n  timestamp: number;\n  event: NostrEvent;\n  relayUrls: string[];\n}\n","/**\n * PWA initialization utilities\n * Call from app initialization\n */\n\nimport {\n  initPWA,\n  registerServiceWorker,\n  getQueuedMessages,\n  isOnline,\n  triggerBackgroundSync\n} from '../stores/pwa';\nimport { get } from 'svelte/store';\n\n/**\n * Initialize PWA features\n * Should be called from main app component on mount\n */\nexport async function initializePWA(): Promise<void> {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // Initialize PWA event listeners\n  initPWA();\n\n  // Register service worker\n  const registration = await registerServiceWorker();\n\n  if (registration) {\n    console.log('[PWA] Service worker registered successfully');\n\n    // Check for queued messages\n    try {\n      const messages = await getQueuedMessages();\n\n      if (messages.length > 0) {\n        console.log(`[PWA] Found ${messages.length} queued messages`);\n\n        // Trigger sync if online\n        if (get(isOnline)) {\n          await triggerBackgroundSync();\n        }\n      }\n    } catch (error) {\n      console.error('[PWA] Failed to check message queue:', error);\n    }\n  }\n}\n\n/**\n * Handle send message with offline support\n * Queue message if offline, send immediately if online\n */\nexport async function sendMessageWithOfflineSupport(\n  event: NostrEvent,\n  relayUrls: string[],\n  sendFn: (event: NostrEvent, relayUrls: string[]) => Promise<void>\n): Promise<void> {\n  const online = get(isOnline);\n\n  if (online) {\n    // Try to send immediately\n    try {\n      await sendFn(event, relayUrls);\n    } catch (error) {\n      console.error('[PWA] Send failed, queueing message:', error);\n      const { queueMessage } = await import('../stores/pwa');\n      await queueMessage(event, relayUrls);\n    }\n  } else {\n    // Queue for later\n    console.log('[PWA] Offline, queueing message');\n    const { queueMessage } = await import('../stores/pwa');\n    await queueMessage(event, relayUrls);\n  }\n}\n\ninterface NostrEvent {\n  kind: number;\n  created_at: number;\n  tags: string[][];\n  content: string;\n  pubkey: string;\n  id?: string;\n  sig?: string;\n}\n","<script lang=\"ts\">\n\timport '../app.css';\n\timport { onMount } from 'svelte';\n\timport { browser } from '$app/environment';\n\timport { page } from '$app/stores';\n\timport { base } from '$app/paths';\n\timport { authStore, isAuthenticated, isAdmin } from '$lib/stores/auth';\n\timport { initializePWA } from '$lib/utils/pwa-init';\n\timport {\n\t\tcanInstall,\n\t\ttriggerInstall,\n\t\tupdateAvailable,\n\t\tupdateServiceWorker,\n\t\tisOnline,\n\t\tqueuedMessageCount\n\t} from '$lib/stores/pwa';\n\n\tlet mounted = false;\n\tlet themePreference = 'dark';\n\tlet showInstallBanner = false;\n\tlet showUpdateBanner = false;\n\n\t$: showNav = $page.url.pathname !== `${base}/` && $page.url.pathname !== base && $page.url.pathname !== `${base}/signup` && $page.url.pathname !== `${base}/setup`;\n\n\tcanInstall.subscribe(value => {\n\t\tshowInstallBanner = value;\n\t});\n\n\tupdateAvailable.subscribe(value => {\n\t\tshowUpdateBanner = value;\n\t});\n\n\tonMount(() => {\n\t\tmounted = true;\n\n\t\tif (browser) {\n\t\t\tconst savedTheme = localStorage.getItem('theme') || 'dark';\n\t\t\tthemePreference = savedTheme;\n\t\t\tdocument.documentElement.setAttribute('data-theme', savedTheme);\n\n\t\t\t// Initialize PWA\n\t\t\tinitializePWA();\n\t\t}\n\t});\n\n\tfunction toggleTheme() {\n\t\tif (!browser) return;\n\n\t\tthemePreference = themePreference === 'dark' ? 'light' : 'dark';\n\t\tdocument.documentElement.setAttribute('data-theme', themePreference);\n\t\tlocalStorage.setItem('theme', themePreference);\n\t}\n\n\tfunction dismissInstallBanner() {\n\t\tshowInstallBanner = false;\n\t}\n\n\tasync function handleInstall() {\n\t\tconst installed = await triggerInstall();\n\t\tif (installed) {\n\t\t\tshowInstallBanner = false;\n\t\t}\n\t}\n\n\tasync function handleUpdate() {\n\t\tawait updateServiceWorker();\n\t}\n</script>\n\n<svelte:head>\n\t<title>Fairfield Nostr</title>\n</svelte:head>\n\n<!-- PWA Install Banner -->\n{#if showInstallBanner}\n\t<div class=\"alert alert-info fixed top-0 left-0 right-0 z-50 rounded-none\">\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"stroke-current shrink-0 w-6 h-6\">\n\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n\t\t</svg>\n\t\t<span>Install Fairfield Nostr for offline access</span>\n\t\t<div class=\"flex gap-2\">\n\t\t\t<button class=\"btn btn-sm btn-primary\" on:click={handleInstall}>Install</button>\n\t\t\t<button class=\"btn btn-sm btn-ghost\" on:click={dismissInstallBanner}>Dismiss</button>\n\t\t</div>\n\t</div>\n{/if}\n\n<!-- PWA Update Banner -->\n{#if showUpdateBanner}\n\t<div class=\"alert alert-warning fixed top-0 left-0 right-0 z-50 rounded-none\">\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"stroke-current shrink-0 w-6 h-6\">\n\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"></path>\n\t\t</svg>\n\t\t<span>A new version is available</span>\n\t\t<button class=\"btn btn-sm btn-warning\" on:click={handleUpdate}>Update Now</button>\n\t</div>\n{/if}\n\n<!-- Offline Indicator -->\n{#if !$isOnline}\n\t<div class=\"alert alert-error fixed bottom-0 left-0 right-0 z-50 rounded-none\">\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"stroke-current shrink-0 w-6 h-6\">\n\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636\"></path>\n\t\t</svg>\n\t\t<span>\n\t\t\tYou're offline. Messages will be queued.\n\t\t\t{#if $queuedMessageCount > 0}\n\t\t\t\t({$queuedMessageCount} queued)\n\t\t\t{/if}\n\t\t</span>\n\t</div>\n{/if}\n\n<div class=\"min-h-screen w-full transition-base\">\n\t{#if mounted}\n\t\t{#if showNav && $isAuthenticated}\n\t\t\t<nav class=\"navbar bg-base-200 shadow-lg\">\n\t\t\t\t<div class=\"navbar-start\">\n\t\t\t\t\t<a href=\"{base}/chat\" class=\"btn btn-ghost text-xl\">Fairfield Nostr</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"navbar-center hidden lg:flex\">\n\t\t\t\t\t<ul class=\"menu menu-horizontal px-1\">\n\t\t\t\t\t\t<li><a href=\"{base}/chat\" class:active={$page.url.pathname.startsWith(`${base}/chat`)}>Channels</a></li>\n\t\t\t\t\t\t<li><a href=\"{base}/dm\" class:active={$page.url.pathname.startsWith(`${base}/dm`)}>Messages</a></li>\n\t\t\t\t\t\t{#if $isAdmin}\n\t\t\t\t\t\t\t<li><a href=\"{base}/admin\" class:active={$page.url.pathname === `${base}/admin`}>Admin</a></li>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"navbar-end gap-2\">\n\t\t\t\t\t<button class=\"btn btn-ghost btn-circle\" on:click={toggleTheme}>\n\t\t\t\t\t\t{#if themePreference === 'dark'}\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"w-5 h-5\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\"/></svg>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"w-5 h-5\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"/></svg>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"btn btn-ghost\" on:click={() => authStore.logout()}>\n\t\t\t\t\t\tLogout\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t{/if}\n\t\t<slot />\n\t{:else}\n\t\t<div class=\"flex items-center justify-center min-h-screen\">\n\t\t\t<div class=\"loading loading-spinner loading-lg text-primary\"></div>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t:global(body) {\n\t\toverscroll-behavior: none;\n\t}\n</style>\n"],"names":["globals","prerender","ssr","installPrompt","writable","updateAvailable","isOnline","swRegistration","isPWAInstalled","queuedMessageCount","initPWA","triggerBackgroundSync","e","event","type","count","triggerInstall","prompt","get","outcome","error","registerServiceWorker","swPath","base","swScope","registration","newWorker","updateServiceWorker","getQueuedMessages","resolve","reject","messageChannel","canInstall","derived","$installPrompt","$isPWAInstalled","initializePWA","messages","insert_hydration","target","div1","anchor","append_hydration","svg","path","span","div0","button0","button1","ctx","div","button","if_block","create_if_block_5","create_if_block_1","create_if_block_3","create_if_block_2","toggle_class","a1","a2","nav","ul","li0","li1","div2","a","li","create_if_block_7","create_if_block_6","create_if_block_4","mounted","themePreference","showInstallBanner","showUpdateBanner","value","onMount","savedTheme","toggleTheme","dismissInstallBanner","handleInstall","handleUpdate","click_handler","authStore","$$invalidate","showNav","$page"],"mappings":"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","x_google_ignoreList":[0]}