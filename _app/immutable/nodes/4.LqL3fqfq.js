import{s as fe,n as q,d as u,i as C,b as d,l as f,m as he,g as D,c as h,e as k,o as P,j as I,h as _,k as _e,p as me,a as L,r as pe,f as A,t as w,v as le}from"../chunks/D9KvLAFu.js";import{e as se,u as ve,d as be}from"../chunks/CZ71Vj_C.js";import{S as ge,i as ke}from"../chunks/Bq9qkgAl.js";import{g as ne}from"../chunks/Cpn7EE4E.js";import{b as ae}from"../chunks/Dv-Yp-mw.js";import{c as ye}from"../chunks/C1oTLSak.js";import{a as Ce}from"../chunks/szLgq1wZ.js";import{n as xe}from"../chunks/QaGk0KJq.js";const Ee=!0,De=async()=>({channels:[]}),Ue=Object.freeze(Object.defineProperty({__proto__:null,load:De,prerender:Ee},Symbol.toStringTag,{value:"Module"}));function re(o,e,t){const l=o.slice();return l[6]=e[t],l}function Ie(o){let e,t=[],l=new Map,s=se(o[0]);const a=n=>n[6].id;for(let n=0;n<s.length;n+=1){let c=re(o,s,n),i=a(c);l.set(i,t[n]=oe(i,c))}return{c(){e=_("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=h(n,"DIV",{class:!0});var c=k(e);for(let i=0;i<t.length;i+=1)t[i].l(c);c.forEach(u),this.h()},h(){f(e,"class","grid gap-4 sm:grid-cols-2")},m(n,c){C(n,e,c);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,c){c&5&&(s=se(n[0]),t=ve(t,c,a,1,n,s,l,e,be,oe,null,re))},d(n){n&&u(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Se(o){let e,t='<div class="card-body items-center text-center"><p class="text-base-content/70">No channels found. Create one to get started!</p></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-3oz8ny"&&(e.innerHTML=t),this.h()},h(){f(e,"class","card bg-base-200")},m(l,s){C(l,e,s)},p:q,d(l){l&&u(e)}}}function Me(o){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-hu9n30"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex justify-center items-center min-h-[400px]")},m(l,s){C(l,e,s)},p:q,d(l){l&&u(e)}}}function Te(o){let e,t=o[6].name.charAt(0).toUpperCase()+"",l;return{c(){e=_("div"),l=w(t),this.h()},l(s){e=h(s,"DIV",{class:!0});var a=k(e);l=A(a,t),a.forEach(u),this.h()},h(){f(e,"class","w-12 h-12 rounded-lg bg-primary flex items-center justify-center text-primary-content font-bold text-xl")},m(s,a){C(s,e,a),d(e,l)},p(s,a){a&1&&t!==(t=s[6].name.charAt(0).toUpperCase()+"")&&L(l,t)},d(s){s&&u(e)}}}function Ve(o){let e,t,l;return{c(){e=_("img"),this.h()},l(s){e=h(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){le(e.src,t=o[6].picture)||f(e,"src",t),f(e,"alt",l=o[6].name),f(e,"class","w-12 h-12 rounded-lg object-cover")},m(s,a){C(s,e,a)},p(s,a){a&1&&!le(e.src,t=s[6].picture)&&f(e,"src",t),a&1&&l!==(l=s[6].name)&&f(e,"alt",l)},d(s){s&&u(e)}}}function ie(o){let e,t=o[6].description+"",l;return{c(){e=_("p"),l=w(t),this.h()},l(s){e=h(s,"P",{class:!0});var a=k(e);l=A(a,t),a.forEach(u),this.h()},h(){f(e,"class","text-sm text-base-content/70 line-clamp-2")},m(s,a){C(s,e,a),d(e,l)},p(s,a){a&1&&t!==(t=s[6].description+"")&&L(l,t)},d(s){s&&u(e)}}}function ce(o){let e,t="Encrypted";return{c(){e=_("span"),e.textContent=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-17lvcyk"&&(e.textContent=t),this.h()},h(){f(e,"class","badge badge-sm badge-primary")},m(l,s){C(l,e,s)},d(l){l&&u(e)}}}function oe(o,e){let t,l,s,a,n,c,i=e[6].name+"",r,b,x,v,M,N=e[6].memberCount+"",z,B,F,T,X="â€¢",G,j,H=de(e[6].createdAt)+"",K,J,Q,R,Y;function Z(E,g){return E[6].picture?Ve:Te}let O=Z(e),y=O(e),m=e[6].description&&ie(e),p=e[6].isEncrypted&&ce();function ue(){return e[4](e[6])}return{key:o,first:null,c(){t=_("button"),l=_("div"),s=_("div"),y.c(),a=I(),n=_("div"),c=_("h3"),r=w(i),b=I(),m&&m.c(),x=I(),v=_("div"),M=_("span"),z=w(N),B=w(" members"),F=I(),T=_("span"),T.textContent=X,G=I(),j=_("span"),K=w(H),J=I(),p&&p.c(),Q=I(),this.h()},l(E){t=h(E,"BUTTON",{class:!0});var g=k(t);l=h(g,"DIV",{class:!0});var $=k(l);s=h($,"DIV",{class:!0});var U=k(s);y.l(U),a=D(U),n=h(U,"DIV",{class:!0});var V=k(n);c=h(V,"H3",{class:!0});var ee=k(c);r=A(ee,i),ee.forEach(u),b=D(V),m&&m.l(V),x=D(V),v=h(V,"DIV",{class:!0});var S=k(v);M=h(S,"SPAN",{});var W=k(M);z=A(W,N),B=A(W," members"),W.forEach(u),F=D(S),T=h(S,"SPAN",{"data-svelte-h":!0}),P(T)!=="svelte-7hh8jk"&&(T.textContent=X),G=D(S),j=h(S,"SPAN",{});var te=k(j);K=A(te,H),te.forEach(u),J=D(S),p&&p.l(S),S.forEach(u),V.forEach(u),U.forEach(u),$.forEach(u),Q=D(g),g.forEach(u),this.h()},h(){f(c,"class","card-title text-lg mb-1"),f(v,"class","flex items-center gap-3 mt-2 text-xs text-base-content/60"),f(n,"class","flex-1 min-w-0"),f(s,"class","flex items-start gap-3"),f(l,"class","card-body"),f(t,"class","card bg-base-200 hover:bg-base-300 transition-base cursor-pointer text-left"),this.first=t},m(E,g){C(E,t,g),d(t,l),d(l,s),y.m(s,null),d(s,a),d(s,n),d(n,c),d(c,r),d(n,b),m&&m.m(n,null),d(n,x),d(n,v),d(v,M),d(M,z),d(M,B),d(v,F),d(v,T),d(v,G),d(v,j),d(j,K),d(v,J),p&&p.m(v,null),d(t,Q),R||(Y=pe(t,"click",ue),R=!0)},p(E,g){e=E,O===(O=Z(e))&&y?y.p(e,g):(y.d(1),y=O(e),y&&(y.c(),y.m(s,a))),g&1&&i!==(i=e[6].name+"")&&L(r,i),e[6].description?m?m.p(e,g):(m=ie(e),m.c(),m.m(n,x)):m&&(m.d(1),m=null),g&1&&N!==(N=e[6].memberCount+"")&&L(z,N),g&1&&H!==(H=de(e[6].createdAt)+"")&&L(K,H),e[6].isEncrypted?p||(p=ce(),p.c(),p.m(v,null)):p&&(p.d(1),p=null)},d(E){E&&u(t),y.d(),m&&m.d(),p&&p.d(),R=!1,Y()}}}function Ae(o){let e,t,l,s='<h1 class="text-4xl font-bold gradient-text mb-2">Channels</h1> <p class="text-base-content/70">Join conversations in public channels</p>',a;function n(r,b){return r[1]?Me:r[0].length===0?Se:Ie}let c=n(o),i=c(o);return{c(){e=I(),t=_("div"),l=_("div"),l.innerHTML=s,a=I(),i.c(),this.h()},l(r){he("svelte-102szcl",document.head).forEach(u),e=D(r),t=h(r,"DIV",{class:!0});var x=k(t);l=h(x,"DIV",{class:!0,"data-svelte-h":!0}),P(l)!=="svelte-bnd43p"&&(l.innerHTML=s),a=D(x),i.l(x),x.forEach(u),this.h()},h(){document.title="Channels - Minimoomaa Noir",f(l,"class","mb-6"),f(t,"class","container mx-auto p-4 max-w-4xl")},m(r,b){C(r,e,b),C(r,t,b),d(t,l),d(t,a),i.m(t,null)},p(r,[b]){c===(c=n(r))&&i?i.p(r,b):(i.d(1),i=c(r),i&&(i.c(),i.m(t,null)))},i:q,o:q,d(r){r&&(u(e),u(t)),i.d()}}}function de(o){return new Date(o*1e3).toLocaleDateString()}function we(o,e,t){let l;_e(o,Ce,r=>t(5,l=r));let{data:s}=e,a=[],n=!0;me(async()=>{if(!l.isAuthenticated||!l.publicKey){ne(`${ae}/`);return}try{const r=await xe.getNDK(),b=["business","moomaa-tribe"];t(0,a=await ye.fetchChannels(r,l.publicKey,b))}catch(r){console.error("Failed to load channels:",r)}finally{t(1,n=!1)}});function c(r){ne(`${ae}/chat/${r}`)}const i=r=>c(r.id);return o.$$set=r=>{"data"in r&&t(3,s=r.data)},[a,n,c,s,i]}class qe extends ge{constructor(e){super(),ke(this,e,we,Ae,fe,{data:3})}}export{qe as component,Ue as universal};
//# sourceMappingURL=4.LqL3fqfq.js.map
