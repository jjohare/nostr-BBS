import{s as Nt,n as Fe,d as c,a as me,l,i as fe,b as s,r as ke,m as Lt,g as m,c as r,e as h,o as S,f as te,C as Je,j as g,h as i,t as se,D as Xe,k as bt,p as Mt,u as St,y as Ee,L as _t,M as Pt,N as Ht,E as jt}from"../chunks/D9KvLAFu.js";import{e as Ge,u as Bt,d as Ot}from"../chunks/CZ71Vj_C.js";import{S as Ut,i as qt}from"../chunks/Bq9qkgAl.js";import{g as zt}from"../chunks/Cpn7EE4E.js";import{b as Rt}from"../chunks/Dv-Yp-mw.js";import{b as Kt,a as Ft}from"../chunks/szLgq1wZ.js";import{h as Jt,c as et,N as Xt,n as Tt,s as Gt}from"../chunks/QaGk0KJq.js";const Qt=!0,Wt=async()=>({stats:null}),us=Object.freeze(Object.defineProperty({__proto__:null,load:Wt,prerender:Qt},Symbol.toStringTag,{value:"Module"})),At={CREATE:40};async function Yt(n){if(!Jt())throw new Error("No signer configured. Please login first.");await et();const t={name:n.name,about:n.description},e=new Xt(Tt);return e.kind=At.CREATE,e.content=JSON.stringify(t),n.visibility&&n.visibility!=="public"&&e.tags.push(["visibility",n.visibility]),n.cohorts&&n.cohorts.length>0&&e.tags.push(["cohort",n.cohorts.join(",")]),n.encrypted&&e.tags.push(["encrypted","true"]),await e.sign(),await e.publish(),console.log("Channel created:",e.id),{id:e.id,name:n.name,description:n.description,visibility:n.visibility||"public",cohorts:n.cohorts||[],encrypted:n.encrypted||!1,createdAt:e.created_at||Math.floor(Date.now()/1e3),creatorPubkey:e.pubkey}}async function Zt(n=100){await et();const t={kinds:[At.CREATE],limit:n},e=await Tt.fetchEvents(t),a=[];for(const o of e)try{const d=JSON.parse(o.content),u=o.tags.find(v=>v[0]==="visibility"),p=o.tags.find(v=>v[0]==="cohort"),f=o.tags.find(v=>v[0]==="encrypted");a.push({id:o.id,name:d.name||"Unnamed Channel",description:d.about,visibility:u?.[1]||"public",cohorts:p?.[1]?.split(",").filter(Boolean)||[],encrypted:f?.[1]==="true",createdAt:o.created_at||0,creatorPubkey:o.pubkey})}catch(d){console.error("Failed to parse channel event:",d)}return a.sort((o,d)=>d.createdAt-o.createdAt),a}function mt(n,t,e){const a=n.slice();return a[23]=t[e],a}function gt(n,t,e){const a=n.slice();return a[26]=t[e],a}function Ct(n){let t,e,a,o,d,u,p,f,v="Dismiss",V,E;return{c(){t=i("div"),e=Xe("svg"),a=Xe("path"),o=g(),d=i("span"),u=se(n[3]),p=g(),f=i("button"),f.textContent=v,this.h()},l(x){t=r(x,"DIV",{class:!0});var D=h(t);e=Je(D,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var H=h(e);a=Je(H,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(a).forEach(c),H.forEach(c),o=m(D),d=r(D,"SPAN",{});var k=h(d);u=te(k,n[3]),k.forEach(c),p=m(D),f=r(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(f)!=="svelte-1oc0rew"&&(f.textContent=v),D.forEach(c),this.h()},h(){l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"stroke-width","2"),l(a,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","stroke-current shrink-0 h-6 w-6"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(f,"class","btn btn-ghost btn-sm"),l(t,"class","alert alert-error mb-4")},m(x,D){fe(x,t,D),s(t,e),s(e,a),s(t,o),s(t,d),s(d,u),s(t,p),s(t,f),V||(E=ke(f,"click",n[12]),V=!0)},p(x,D){D&8&&me(u,x[3])},d(x){x&&c(t),V=!1,E()}}}function yt(n){let t,e,a="New Channel",o,d,u,p='<span class="label-text">Channel Name *</span>',f,v,V,E,x,D='<span class="label-text">Description</span>',H,k,ne,P,j,T,z='<span class="label-text">Visibility</span>',O,_,y,R="Public",w,b="Cohort Only",A,C="Private",K,N,q,re='<span class="label-text">Cohorts (comma-separated)</span>',ie,$,ve,Ce,oe,Q,ce,ee,we="Encrypted Messages",xe,de,F,He="Cancel",Ve,U,le,pe,ye,Te,B=n[2]&&Et();return{c(){t=i("div"),e=i("h3"),e.textContent=a,o=g(),d=i("div"),u=i("label"),u.innerHTML=p,f=g(),v=i("input"),V=g(),E=i("div"),x=i("label"),x.innerHTML=D,H=g(),k=i("textarea"),ne=g(),P=i("div"),j=i("div"),T=i("label"),T.innerHTML=z,O=g(),_=i("select"),y=i("option"),y.textContent=R,w=i("option"),w.textContent=b,A=i("option"),A.textContent=C,K=g(),N=i("div"),q=i("label"),q.innerHTML=re,ie=g(),$=i("input"),ve=g(),Ce=i("div"),oe=i("label"),Q=i("input"),ce=g(),ee=i("span"),ee.textContent=we,xe=g(),de=i("div"),F=i("button"),F.textContent=He,Ve=g(),U=i("button"),B&&B.c(),le=se(`
              Create Channel`),this.h()},l(L){t=r(L,"DIV",{class:!0});var M=h(t);e=r(M,"H3",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1429g2p"&&(e.textContent=a),o=m(M),d=r(M,"DIV",{class:!0});var De=h(d);u=r(De,"LABEL",{class:!0,"data-svelte-h":!0}),S(u)!=="svelte-ynqc0x"&&(u.innerHTML=p),f=m(De),v=r(De,"INPUT",{type:!0,placeholder:!0,class:!0}),De.forEach(c),V=m(M),E=r(M,"DIV",{class:!0});var be=h(E);x=r(be,"LABEL",{class:!0,"data-svelte-h":!0}),S(x)!=="svelte-144za5x"&&(x.innerHTML=D),H=m(be),k=r(be,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),h(k).forEach(c),be.forEach(c),ne=m(M),P=r(M,"DIV",{class:!0});var J=h(P);j=r(J,"DIV",{class:!0});var ae=h(j);T=r(ae,"LABEL",{class:!0,"data-svelte-h":!0}),S(T)!=="svelte-18uc02x"&&(T.innerHTML=z),O=m(ae),_=r(ae,"SELECT",{class:!0});var ue=h(_);y=r(ue,"OPTION",{"data-svelte-h":!0}),S(y)!=="svelte-56kvny"&&(y.textContent=R),w=r(ue,"OPTION",{"data-svelte-h":!0}),S(w)!=="svelte-11ea9qe"&&(w.textContent=b),A=r(ue,"OPTION",{"data-svelte-h":!0}),S(A)!=="svelte-1biwgrw"&&(A.textContent=C),ue.forEach(c),ae.forEach(c),K=m(J),N=r(J,"DIV",{class:!0});var Ae=h(N);q=r(Ae,"LABEL",{class:!0,"data-svelte-h":!0}),S(q)!=="svelte-7gnf15"&&(q.innerHTML=re),ie=m(Ae),$=r(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),Ae.forEach(c),J.forEach(c),ve=m(M),Ce=r(M,"DIV",{class:!0});var Me=h(Ce);oe=r(Me,"LABEL",{class:!0});var W=h(oe);Q=r(W,"INPUT",{type:!0,class:!0}),ce=m(W),ee=r(W,"SPAN",{class:!0,"data-svelte-h":!0}),S(ee)!=="svelte-19w2onf"&&(ee.textContent=we),W.forEach(c),Me.forEach(c),xe=m(M),de=r(M,"DIV",{class:!0});var Y=h(de);F=r(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),S(F)!=="svelte-17ybty6"&&(F.textContent=He),Ve=m(Y),U=r(Y,"BUTTON",{class:!0});var he=h(U);B&&B.l(he),le=te(he,`
              Create Channel`),he.forEach(c),Y.forEach(c),M.forEach(c),this.h()},h(){l(e,"class","font-semibold mb-4"),l(u,"class","label"),l(v,"type","text"),l(v,"placeholder","Enter channel name"),l(v,"class","input input-bordered"),l(d,"class","form-control mb-3"),l(x,"class","label"),l(k,"class","textarea textarea-bordered"),l(k,"placeholder","Channel description (optional)"),l(k,"rows","2"),l(E,"class","form-control mb-3"),l(T,"class","label"),y.__value="public",Ee(y,y.__value),w.__value="cohort",Ee(w,w.__value),A.__value="private",Ee(A,A.__value),l(_,"class","select select-bordered"),n[8]===void 0&&Pt(()=>n[16].call(_)),l(j,"class","form-control"),l(q,"class","label"),l($,"type","text"),l($,"placeholder","e.g., 2024, 2025"),l($,"class","input input-bordered"),l(N,"class","form-control"),l(P,"class","grid grid-cols-1 md:grid-cols-2 gap-4 mb-3"),l(Q,"type","checkbox"),l(Q,"class","toggle toggle-primary"),l(ee,"class","label-text"),l(oe,"class","label cursor-pointer justify-start gap-2"),l(Ce,"class","form-control mb-4"),l(F,"class","btn btn-ghost"),l(U,"class","btn btn-primary"),U.disabled=pe=n[2]||!n[6].trim(),l(de,"class","flex justify-end gap-2"),l(t,"class","mt-4 p-4 bg-base-300 rounded-lg")},m(L,M){fe(L,t,M),s(t,e),s(t,o),s(t,d),s(d,u),s(d,f),s(d,v),Ee(v,n[6]),s(t,V),s(t,E),s(E,x),s(E,H),s(E,k),Ee(k,n[7]),s(t,ne),s(t,P),s(P,j),s(j,T),s(j,O),s(j,_),s(_,y),s(_,w),s(_,A),_t(_,n[8],!0),s(P,K),s(P,N),s(N,q),s(N,ie),s(N,$),Ee($,n[9]),s(t,ve),s(t,Ce),s(Ce,oe),s(oe,Q),Q.checked=n[10],s(oe,ce),s(oe,ee),s(t,xe),s(t,de),s(de,F),s(de,Ve),s(de,U),B&&B.m(U,null),s(U,le),ye||(Te=[ke(v,"input",n[14]),ke(k,"input",n[15]),ke(_,"change",n[16]),ke($,"input",n[17]),ke(Q,"change",n[18]),ke(F,"click",n[19]),ke(U,"click",n[11])],ye=!0)},p(L,M){M&64&&v.value!==L[6]&&Ee(v,L[6]),M&128&&Ee(k,L[7]),M&256&&_t(_,L[8]),M&512&&$.value!==L[9]&&Ee($,L[9]),M&1024&&(Q.checked=L[10]),L[2]?B||(B=Et(),B.c(),B.m(U,le)):B&&(B.d(1),B=null),M&68&&pe!==(pe=L[2]||!L[6].trim())&&(U.disabled=pe)},d(L){L&&c(t),B&&B.d(),ye=!1,St(Te)}}}function Et(n){let t;return{c(){t=i("span"),this.h()},l(e){t=r(e,"SPAN",{class:!0}),h(t).forEach(c),this.h()},h(){l(t,"class","loading loading-spinner loading-sm")},m(e,a){fe(e,t,a)},d(e){e&&c(t)}}}function $t(n){let t,e=[],a=new Map,o=Ge(n[1]);const d=u=>u[23].id;for(let u=0;u<o.length;u+=1){let p=mt(n,o,u),f=d(p);a.set(f,e[u]=Dt(f,p))}return{c(){t=i("div");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=r(u,"DIV",{class:!0});var p=h(t);for(let f=0;f<e.length;f+=1)e[f].l(p);p.forEach(c),this.h()},h(){l(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(u,p){fe(u,t,p);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(t,null)},p(u,p){p&2&&(o=Ge(u[1]),e=Bt(e,p,d,1,u,o,a,t,Ot,Dt,null,mt))},d(u){u&&c(t);for(let p=0;p<e.length;p+=1)e[p].d()}}}function es(n){let t,e="<p>No channels yet. Create your first channel above.</p>";return{c(){t=i("div"),t.innerHTML=e,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1sfpzae"&&(t.innerHTML=e),this.h()},h(){l(t,"class","text-center py-8 text-base-content/50")},m(a,o){fe(a,t,o)},p:Fe,d(a){a&&c(t)}}}function ts(n){let t,e='<span class="loading loading-spinner loading-lg"></span> <p class="mt-2 text-base-content/70">Loading channels...</p>';return{c(){t=i("div"),t.innerHTML=e,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-19agq8z"&&(t.innerHTML=e),this.h()},h(){l(t,"class","text-center py-8")},m(a,o){fe(a,t,o)},p:Fe,d(a){a&&c(t)}}}function kt(n){let t,e=n[23].description+"",a;return{c(){t=i("p"),a=se(e),this.h()},l(o){t=r(o,"P",{class:!0});var d=h(t);a=te(d,e),d.forEach(c),this.h()},h(){l(t,"class","text-sm text-base-content/70 line-clamp-2")},m(o,d){fe(o,t,d),s(t,a)},p(o,d){d&2&&e!==(e=o[23].description+"")&&me(a,e)},d(o){o&&c(t)}}}function wt(n){let t,e="Encrypted";return{c(){t=i("span"),t.textContent=e,this.h()},l(a){t=r(a,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1g44nk6"&&(t.textContent=e),this.h()},h(){l(t,"class","badge badge-info badge-sm")},m(a,o){fe(a,t,o)},d(a){a&&c(t)}}}function xt(n){let t,e=n[26]+"",a;return{c(){t=i("span"),a=se(e),this.h()},l(o){t=r(o,"SPAN",{class:!0});var d=h(t);a=te(d,e),d.forEach(c),this.h()},h(){l(t,"class","badge badge-outline badge-sm")},m(o,d){fe(o,t,d),s(t,a)},p(o,d){d&2&&e!==(e=o[26]+"")&&me(a,e)},d(o){o&&c(t)}}}function Dt(n,t){let e,a,o,d=t[23].name+"",u,p,f,v,V,E=t[23].visibility+"",x,D,H,k,ne,P,j,T=It(t[23].createdAt)+"",z,O,_=t[23].description&&kt(t),y=t[23].encrypted&&wt(),R=Ge(t[23].cohorts),w=[];for(let b=0;b<R.length;b+=1)w[b]=xt(gt(t,R,b));return{key:n,first:null,c(){e=i("div"),a=i("div"),o=i("h3"),u=se(d),p=g(),_&&_.c(),f=g(),v=i("div"),V=i("span"),x=se(E),H=g(),y&&y.c(),k=g();for(let b=0;b<w.length;b+=1)w[b].c();ne=g(),P=i("div"),j=se("Created "),z=se(T),O=g(),this.h()},l(b){e=r(b,"DIV",{class:!0});var A=h(e);a=r(A,"DIV",{class:!0});var C=h(a);o=r(C,"H3",{class:!0});var K=h(o);u=te(K,d),K.forEach(c),p=m(C),_&&_.l(C),f=m(C),v=r(C,"DIV",{class:!0});var N=h(v);V=r(N,"SPAN",{class:!0});var q=h(V);x=te(q,E),q.forEach(c),H=m(N),y&&y.l(N),k=m(N);for(let ie=0;ie<w.length;ie+=1)w[ie].l(N);N.forEach(c),ne=m(C),P=r(C,"DIV",{class:!0});var re=h(P);j=te(re,"Created "),z=te(re,T),re.forEach(c),C.forEach(c),O=m(A),A.forEach(c),this.h()},h(){l(o,"class","font-semibold"),l(V,"class",D="badge "+Vt(t[23].visibility)+" badge-sm"),l(v,"class","flex flex-wrap gap-1 mt-2"),l(P,"class","text-xs text-base-content/50 mt-2"),l(a,"class","card-body p-4"),l(e,"class","card bg-base-300"),this.first=e},m(b,A){fe(b,e,A),s(e,a),s(a,o),s(o,u),s(a,p),_&&_.m(a,null),s(a,f),s(a,v),s(v,V),s(V,x),s(v,H),y&&y.m(v,null),s(v,k);for(let C=0;C<w.length;C+=1)w[C]&&w[C].m(v,null);s(a,ne),s(a,P),s(P,j),s(P,z),s(e,O)},p(b,A){if(t=b,A&2&&d!==(d=t[23].name+"")&&me(u,d),t[23].description?_?_.p(t,A):(_=kt(t),_.c(),_.m(a,f)):_&&(_.d(1),_=null),A&2&&E!==(E=t[23].visibility+"")&&me(x,E),A&2&&D!==(D="badge "+Vt(t[23].visibility)+" badge-sm")&&l(V,"class",D),t[23].encrypted?y||(y=wt(),y.c(),y.m(v,k)):y&&(y.d(1),y=null),A&2){R=Ge(t[23].cohorts);let C;for(C=0;C<R.length;C+=1){const K=gt(t,R,C);w[C]?w[C].p(K,A):(w[C]=xt(K),w[C].c(),w[C].m(v,null))}for(;C<w.length;C+=1)w[C].d(1);w.length=R.length}A&2&&T!==(T=It(t[23].createdAt)+"")&&me(z,T)},d(b){b&&c(e),_&&_.d(),y&&y.d(),jt(w,b)}}}function ss(n){let t,e,a,o,d="Admin Dashboard",u,p,f="System overview and management",v,V,E,x,D,H,k,ne="Relay Status",P,j,T,z,O,_,y=n[0].totalUsers+"",R,w,b,A="Total Users",C,K,N,q,re=n[0].totalChannels+"",ie,$,ve,Ce="Total Channels",oe,Q,ce,ee,we=n[0].totalMessages+"",xe,de,F,He="Total Messages",Ve,U,le,pe,ye=n[0].pendingApprovals+"",Te,B,L,M="Pending Approvals",De,be,J,ae,ue,Ae="Channel Management",Me,W,Y,he,Qe,We,je,Ne,Ye,Le,tt='<div class="card bg-base-200"><div class="card-body"><h2 class="card-title">User Management</h2> <p class="text-sm text-base-content/70">Manage user approvals and permissions</p> <div class="card-actions justify-end mt-4"><button class="btn btn-primary btn-sm">View Users</button></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">Pending Approvals</h2> <p class="text-sm text-base-content/70">Review and approve join requests</p> <div class="card-actions justify-end mt-4"><button class="btn btn-primary btn-sm">View Requests</button></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">System Settings</h2> <p class="text-sm text-base-content/70">Configure relay settings and policies</p> <div class="card-actions justify-end mt-4"><button class="btn btn-primary btn-sm">Settings</button></div></div></div>',Ze,st,X=n[3]&&Ct(n),G=n[4]&&yt(n);function lt(I,Z){return I[2]&&I[1].length===0?ts:I[1].length===0?es:$t}let Be=lt(n),_e=Be(n);return{c(){t=g(),e=i("div"),a=i("div"),o=i("h1"),o.textContent=d,u=g(),p=i("p"),p.textContent=f,v=g(),V=i("div"),E=i("span"),x=se(n[5]),H=g(),k=i("span"),k.textContent=ne,P=g(),X&&X.c(),j=g(),T=i("div"),z=i("div"),O=i("div"),_=i("div"),R=se(y),w=g(),b=i("div"),b.textContent=A,C=g(),K=i("div"),N=i("div"),q=i("div"),ie=se(re),$=g(),ve=i("div"),ve.textContent=Ce,oe=g(),Q=i("div"),ce=i("div"),ee=i("div"),xe=se(we),de=g(),F=i("div"),F.textContent=He,Ve=g(),U=i("div"),le=i("div"),pe=i("div"),Te=se(ye),B=g(),L=i("div"),L.textContent=M,De=g(),be=i("div"),J=i("div"),ae=i("div"),ue=i("h2"),ue.textContent=Ae,Me=g(),W=i("button"),Y=Xe("svg"),he=Xe("path"),Qe=se(`
          Create Channel`),We=g(),G&&G.c(),je=g(),Ne=i("div"),_e.c(),Ye=g(),Le=i("div"),Le.innerHTML=tt,this.h()},l(I){Lt("svelte-1dy2t3y",document.head).forEach(c),t=m(I),e=r(I,"DIV",{class:!0});var ge=h(e);a=r(ge,"DIV",{class:!0});var Se=h(a);o=r(Se,"H1",{class:!0,"data-svelte-h":!0}),S(o)!=="svelte-48mamn"&&(o.textContent=d),u=m(Se),p=r(Se,"P",{class:!0,"data-svelte-h":!0}),S(p)!=="svelte-g7e0f6"&&(p.textContent=f),v=m(Se),V=r(Se,"DIV",{class:!0});var Oe=h(V);E=r(Oe,"SPAN",{class:!0});var at=h(E);x=te(at,n[5]),at.forEach(c),H=m(Oe),k=r(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),S(k)!=="svelte-1jtew3n"&&(k.textContent=ne),Oe.forEach(c),Se.forEach(c),P=m(ge),X&&X.l(ge),j=m(ge),T=r(ge,"DIV",{class:!0});var Ie=h(T);z=r(Ie,"DIV",{class:!0});var nt=h(z);O=r(nt,"DIV",{class:!0});var Ue=h(O);_=r(Ue,"DIV",{class:!0});var rt=h(_);R=te(rt,y),rt.forEach(c),w=m(Ue),b=r(Ue,"DIV",{class:!0,"data-svelte-h":!0}),S(b)!=="svelte-mko655"&&(b.textContent=A),Ue.forEach(c),nt.forEach(c),C=m(Ie),K=r(Ie,"DIV",{class:!0});var it=h(K);N=r(it,"DIV",{class:!0});var qe=h(N);q=r(qe,"DIV",{class:!0});var ot=h(q);ie=te(ot,re),ot.forEach(c),$=m(qe),ve=r(qe,"DIV",{class:!0,"data-svelte-h":!0}),S(ve)!=="svelte-1vop7r"&&(ve.textContent=Ce),qe.forEach(c),it.forEach(c),oe=m(Ie),Q=r(Ie,"DIV",{class:!0});var ct=h(Q);ce=r(ct,"DIV",{class:!0});var ze=h(ce);ee=r(ze,"DIV",{class:!0});var dt=h(ee);xe=te(dt,we),dt.forEach(c),de=m(ze),F=r(ze,"DIV",{class:!0,"data-svelte-h":!0}),S(F)!=="svelte-16fgwgv"&&(F.textContent=He),ze.forEach(c),ct.forEach(c),Ve=m(Ie),U=r(Ie,"DIV",{class:!0});var ut=h(U);le=r(ut,"DIV",{class:!0});var Re=h(le);pe=r(Re,"DIV",{class:!0});var ht=h(pe);Te=te(ht,ye),ht.forEach(c),B=m(Re),L=r(Re,"DIV",{class:!0,"data-svelte-h":!0}),S(L)!=="svelte-14ec3qe"&&(L.textContent=M),Re.forEach(c),ut.forEach(c),Ie.forEach(c),De=m(ge),be=r(ge,"DIV",{class:!0});var ft=h(be);J=r(ft,"DIV",{class:!0});var Pe=h(J);ae=r(Pe,"DIV",{class:!0});var Ke=h(ae);ue=r(Ke,"H2",{class:!0,"data-svelte-h":!0}),S(ue)!=="svelte-xef5nc"&&(ue.textContent=Ae),Me=m(Ke),W=r(Ke,"BUTTON",{class:!0});var $e=h(W);Y=Je($e,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var vt=h(Y);he=Je(vt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(he).forEach(c),vt.forEach(c),Qe=te($e,`
          Create Channel`),$e.forEach(c),Ke.forEach(c),We=m(Pe),G&&G.l(Pe),je=m(Pe),Ne=r(Pe,"DIV",{class:!0});var pt=h(Ne);_e.l(pt),pt.forEach(c),Pe.forEach(c),ft.forEach(c),Ye=m(ge),Le=r(ge,"DIV",{class:!0,"data-svelte-h":!0}),S(Le)!=="svelte-a9ey04"&&(Le.innerHTML=tt),ge.forEach(c),this.h()},h(){document.title="Admin Dashboard - Minimoomaa Noir",l(o,"class","text-4xl font-bold gradient-text mb-2"),l(p,"class","text-base-content/70"),l(E,"class",D="badge "+(n[5]==="connected"?"badge-success":n[5]==="error"?"badge-error":"badge-warning")),l(k,"class","text-sm text-base-content/50"),l(V,"class","mt-2 flex items-center gap-2"),l(a,"class","mb-6"),l(_,"class","stat-value text-primary"),l(b,"class","text-sm text-base-content/70 uppercase tracking-wide"),l(O,"class","card-body items-center text-center"),l(z,"class","card bg-base-200"),l(q,"class","stat-value text-primary"),l(ve,"class","text-sm text-base-content/70 uppercase tracking-wide"),l(N,"class","card-body items-center text-center"),l(K,"class","card bg-base-200"),l(ee,"class","stat-value text-primary"),l(F,"class","text-sm text-base-content/70 uppercase tracking-wide"),l(ce,"class","card-body items-center text-center"),l(Q,"class","card bg-base-200"),l(pe,"class","stat-value text-warning"),l(L,"class","text-sm text-base-content/70 uppercase tracking-wide"),l(le,"class","card-body items-center text-center"),l(U,"class","card bg-warning/20 border border-warning"),l(T,"class","grid gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-8"),l(ue,"class","card-title"),l(he,"stroke-linecap","round"),l(he,"stroke-linejoin","round"),l(he,"stroke-width","2"),l(he,"d","M12 4v16m8-8H4"),l(Y,"xmlns","http://www.w3.org/2000/svg"),l(Y,"class","h-5 w-5"),l(Y,"fill","none"),l(Y,"viewBox","0 0 24 24"),l(Y,"stroke","currentColor"),l(W,"class","btn btn-primary gap-2"),W.disabled=n[2],l(ae,"class","flex items-center justify-between"),l(Ne,"class","mt-4"),l(J,"class","card-body"),l(be,"class","card bg-base-200 mb-6"),l(Le,"class","grid gap-4 md:grid-cols-2 lg:grid-cols-3"),l(e,"class","container mx-auto p-4 max-w-6xl")},m(I,Z){fe(I,t,Z),fe(I,e,Z),s(e,a),s(a,o),s(a,u),s(a,p),s(a,v),s(a,V),s(V,E),s(E,x),s(V,H),s(V,k),s(e,P),X&&X.m(e,null),s(e,j),s(e,T),s(T,z),s(z,O),s(O,_),s(_,R),s(O,w),s(O,b),s(T,C),s(T,K),s(K,N),s(N,q),s(q,ie),s(N,$),s(N,ve),s(T,oe),s(T,Q),s(Q,ce),s(ce,ee),s(ee,xe),s(ce,de),s(ce,F),s(T,Ve),s(T,U),s(U,le),s(le,pe),s(pe,Te),s(le,B),s(le,L),s(e,De),s(e,be),s(be,J),s(J,ae),s(ae,ue),s(ae,Me),s(ae,W),s(W,Y),s(Y,he),s(W,Qe),s(J,We),G&&G.m(J,null),s(J,je),s(J,Ne),_e.m(Ne,null),s(e,Ye),s(e,Le),Ze||(st=ke(W,"click",n[13]),Ze=!0)},p(I,[Z]){Z&32&&me(x,I[5]),Z&32&&D!==(D="badge "+(I[5]==="connected"?"badge-success":I[5]==="error"?"badge-error":"badge-warning"))&&l(E,"class",D),I[3]?X?X.p(I,Z):(X=Ct(I),X.c(),X.m(e,j)):X&&(X.d(1),X=null),Z&1&&y!==(y=I[0].totalUsers+"")&&me(R,y),Z&1&&re!==(re=I[0].totalChannels+"")&&me(ie,re),Z&1&&we!==(we=I[0].totalMessages+"")&&me(xe,we),Z&1&&ye!==(ye=I[0].pendingApprovals+"")&&me(Te,ye),Z&4&&(W.disabled=I[2]),I[4]?G?G.p(I,Z):(G=yt(I),G.c(),G.m(J,je)):G&&(G.d(1),G=null),Be===(Be=lt(I))&&_e?_e.p(I,Z):(_e.d(1),_e=Be(I),_e&&(_e.c(),_e.m(Ne,null)))},i:Fe,o:Fe,d(I){I&&(c(t),c(e)),X&&X.d(),G&&G.d(),_e.d(),Ze=!1,st()}}}function It(n){return new Date(n*1e3).toLocaleDateString()}function Vt(n){return{public:"badge-success",cohort:"badge-warning",private:"badge-error"}[n]||"badge-ghost"}function ls(n,t,e){let a,o;bt(n,Kt,b=>e(20,a=b)),bt(n,Ft,b=>e(21,o=b));let d={totalUsers:0,totalChannels:0,totalMessages:0,pendingApprovals:0},u=[],p=!1,f=null,v=!1,V="disconnected",E="",x="",D="public",H="",k=!1;async function ne(){if(!o.privateKey){e(3,f="Please login first to access admin features");return}try{e(2,p=!0),e(3,f=null),Gt(o.privateKey),await et(),e(5,V="connected"),e(1,u=await Zt()),e(0,d.totalChannels=u.length,d)}catch(b){e(3,f=b instanceof Error?b.message:"Failed to initialize admin"),e(5,V="error")}finally{e(2,p=!1)}}async function P(){if(!E.trim()){e(3,f="Channel name is required");return}try{e(2,p=!0),e(3,f=null);const b=H.split(",").map(C=>C.trim()).filter(Boolean),A=await Yt({name:E.trim(),description:x.trim()||void 0,visibility:D,cohorts:b,encrypted:k});e(1,u=[A,...u]),e(0,d.totalChannels=u.length,d),e(6,E=""),e(7,x=""),e(8,D="public"),e(9,H=""),e(10,k=!1),e(4,v=!1)}catch(b){e(3,f=b instanceof Error?b.message:"Failed to create channel")}finally{e(2,p=!1)}}Mt(()=>{if(!a){zt(`${Rt}/chat`);return}ne()});const j=()=>e(3,f=null),T=()=>e(4,v=!v);function z(){E=this.value,e(6,E)}function O(){x=this.value,e(7,x)}function _(){D=Ht(this),e(8,D)}function y(){H=this.value,e(9,H)}function R(){k=this.checked,e(10,k)}return[d,u,p,f,v,V,E,x,D,H,k,P,j,T,z,O,_,y,R,()=>e(4,v=!1)]}class hs extends Ut{constructor(t){super(),qt(this,t,ls,ss,Nt,{})}}export{hs as component,us as universal};
//# sourceMappingURL=3.D_H32AcE.js.map
