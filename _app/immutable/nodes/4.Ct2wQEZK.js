import{n as ue,f as fe}from"../chunks/Dj2A1cQj.js";import{s as _e,n as U,d as h,i as C,b as d,l as u,m as me,g as D,c as f,e as k,o as P,j as S,h as _,k as pe,p as ve,a as L,q as be,f as w,t as A,r as ne}from"../chunks/B7P-bQO9.js";import{e as le,u as ge,d as ke}from"../chunks/C3bkP_Kp.js";import{S as ye,i as Ce}from"../chunks/BuTC0y2q.js";import{g as se}from"../chunks/3iu1C0Kx.js";import{b as ae}from"../chunks/DkN-uFVr.js";import{n as xe,c as Ee}from"../chunks/BN_xWD1A.js";import{a as De}from"../chunks/CshrlUFe.js";const Se=!0,Ie=async()=>{try{const c=ue.get();return c?{channels:await fe(c)}:{channels:[]}}catch(c){return console.error("Failed to load channels:",c),{channels:[]}}},ze=Object.freeze(Object.defineProperty({__proto__:null,load:Ie,prerender:Se},Symbol.toStringTag,{value:"Module"}));function re(c,e,t){const n=c.slice();return n[6]=e[t],n}function Me(c){let e,t=[],n=new Map,l=le(c[0]);const a=s=>s[6].id;for(let s=0;s<l.length;s+=1){let o=re(c,l,s),i=a(o);n.set(i,t[s]=oe(i,o))}return{c(){e=_("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=f(s,"DIV",{class:!0});var o=k(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(h),this.h()},h(){u(e,"class","grid gap-4 sm:grid-cols-2")},m(s,o){C(s,e,o);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(s,o){o&5&&(l=le(s[0]),t=ge(t,o,a,1,s,l,n,e,ke,oe,null,re))},d(s){s&&h(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Te(c){let e,t='<div class="card-body items-center text-center"><p class="text-base-content/70">No channels found. Create one to get started!</p></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(n){e=f(n,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-3oz8ny"&&(e.innerHTML=t),this.h()},h(){u(e,"class","card bg-base-200")},m(n,l){C(n,e,l)},p:U,d(n){n&&h(e)}}}function Ve(c){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(n){e=f(n,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-hu9n30"&&(e.innerHTML=t),this.h()},h(){u(e,"class","flex justify-center items-center min-h-[400px]")},m(n,l){C(n,e,l)},p:U,d(n){n&&h(e)}}}function we(c){let e,t=c[6].name.charAt(0).toUpperCase()+"",n;return{c(){e=_("div"),n=A(t),this.h()},l(l){e=f(l,"DIV",{class:!0});var a=k(e);n=w(a,t),a.forEach(h),this.h()},h(){u(e,"class","w-12 h-12 rounded-lg bg-primary flex items-center justify-center text-primary-content font-bold text-xl")},m(l,a){C(l,e,a),d(e,n)},p(l,a){a&1&&t!==(t=l[6].name.charAt(0).toUpperCase()+"")&&L(n,t)},d(l){l&&h(e)}}}function Ae(c){let e,t,n;return{c(){e=_("img"),this.h()},l(l){e=f(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ne(e.src,t=c[6].picture)||u(e,"src",t),u(e,"alt",n=c[6].name),u(e,"class","w-12 h-12 rounded-lg object-cover")},m(l,a){C(l,e,a)},p(l,a){a&1&&!ne(e.src,t=l[6].picture)&&u(e,"src",t),a&1&&n!==(n=l[6].name)&&u(e,"alt",n)},d(l){l&&h(e)}}}function ie(c){let e,t=c[6].description+"",n;return{c(){e=_("p"),n=A(t),this.h()},l(l){e=f(l,"P",{class:!0});var a=k(e);n=w(a,t),a.forEach(h),this.h()},h(){u(e,"class","text-sm text-base-content/70 line-clamp-2")},m(l,a){C(l,e,a),d(e,n)},p(l,a){a&1&&t!==(t=l[6].description+"")&&L(n,t)},d(l){l&&h(e)}}}function ce(c){let e,t="Encrypted";return{c(){e=_("span"),e.textContent=t,this.h()},l(n){e=f(n,"SPAN",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-17lvcyk"&&(e.textContent=t),this.h()},h(){u(e,"class","badge badge-sm badge-primary")},m(n,l){C(n,e,l)},d(n){n&&h(e)}}}function oe(c,e){let t,n,l,a,s,o,i=e[6].name+"",r,b,x,v,M,N=e[6].memberCount+"",q,z,B,T,X="â€¢",G,j,H=de(e[6].createdAt)+"",F,J,Q,R,Y;function Z(E,g){return E[6].picture?Ae:we}let K=Z(e),y=K(e),m=e[6].description&&ie(e),p=e[6].isEncrypted&&ce();function he(){return e[4](e[6])}return{key:c,first:null,c(){t=_("button"),n=_("div"),l=_("div"),y.c(),a=S(),s=_("div"),o=_("h3"),r=A(i),b=S(),m&&m.c(),x=S(),v=_("div"),M=_("span"),q=A(N),z=A(" members"),B=S(),T=_("span"),T.textContent=X,G=S(),j=_("span"),F=A(H),J=S(),p&&p.c(),Q=S(),this.h()},l(E){t=f(E,"BUTTON",{class:!0});var g=k(t);n=f(g,"DIV",{class:!0});var $=k(n);l=f($,"DIV",{class:!0});var O=k(l);y.l(O),a=D(O),s=f(O,"DIV",{class:!0});var V=k(s);o=f(V,"H3",{class:!0});var ee=k(o);r=w(ee,i),ee.forEach(h),b=D(V),m&&m.l(V),x=D(V),v=f(V,"DIV",{class:!0});var I=k(v);M=f(I,"SPAN",{});var W=k(M);q=w(W,N),z=w(W," members"),W.forEach(h),B=D(I),T=f(I,"SPAN",{"data-svelte-h":!0}),P(T)!=="svelte-7hh8jk"&&(T.textContent=X),G=D(I),j=f(I,"SPAN",{});var te=k(j);F=w(te,H),te.forEach(h),J=D(I),p&&p.l(I),I.forEach(h),V.forEach(h),O.forEach(h),$.forEach(h),Q=D(g),g.forEach(h),this.h()},h(){u(o,"class","card-title text-lg mb-1"),u(v,"class","flex items-center gap-3 mt-2 text-xs text-base-content/60"),u(s,"class","flex-1 min-w-0"),u(l,"class","flex items-start gap-3"),u(n,"class","card-body"),u(t,"class","card bg-base-200 hover:bg-base-300 transition-base cursor-pointer text-left"),this.first=t},m(E,g){C(E,t,g),d(t,n),d(n,l),y.m(l,null),d(l,a),d(l,s),d(s,o),d(o,r),d(s,b),m&&m.m(s,null),d(s,x),d(s,v),d(v,M),d(M,q),d(M,z),d(v,B),d(v,T),d(v,G),d(v,j),d(j,F),d(v,J),p&&p.m(v,null),d(t,Q),R||(Y=be(t,"click",he),R=!0)},p(E,g){e=E,K===(K=Z(e))&&y?y.p(e,g):(y.d(1),y=K(e),y&&(y.c(),y.m(l,a))),g&1&&i!==(i=e[6].name+"")&&L(r,i),e[6].description?m?m.p(e,g):(m=ie(e),m.c(),m.m(s,x)):m&&(m.d(1),m=null),g&1&&N!==(N=e[6].memberCount+"")&&L(q,N),g&1&&H!==(H=de(e[6].createdAt)+"")&&L(F,H),e[6].isEncrypted?p||(p=ce(),p.c(),p.m(v,null)):p&&(p.d(1),p=null)},d(E){E&&h(t),y.d(),m&&m.d(),p&&p.d(),R=!1,Y()}}}function Ne(c){let e,t,n,l='<h1 class="text-4xl font-bold gradient-text mb-2">Channels</h1> <p class="text-base-content/70">Join conversations in public channels</p>',a;function s(r,b){return r[1]?Ve:r[0].length===0?Te:Me}let o=s(c),i=o(c);return{c(){e=S(),t=_("div"),n=_("div"),n.innerHTML=l,a=S(),i.c(),this.h()},l(r){me("svelte-llp9y8",document.head).forEach(h),e=D(r),t=f(r,"DIV",{class:!0});var x=k(t);n=f(x,"DIV",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-bnd43p"&&(n.innerHTML=l),a=D(x),i.l(x),x.forEach(h),this.h()},h(){document.title="Channels - Fairfield Nostr",u(n,"class","mb-6"),u(t,"class","container mx-auto p-4 max-w-4xl")},m(r,b){C(r,e,b),C(r,t,b),d(t,n),d(t,a),i.m(t,null)},p(r,[b]){o===(o=s(r))&&i?i.p(r,b):(i.d(1),i=o(r),i&&(i.c(),i.m(t,null)))},i:U,o:U,d(r){r&&(h(e),h(t)),i.d()}}}function de(c){return new Date(c*1e3).toLocaleDateString()}function je(c,e,t){let n;pe(c,De,r=>t(5,n=r));let{data:l}=e,a=[],s=!0;ve(async()=>{if(!n.isAuthenticated||!n.publicKey){se(`${ae}/`);return}try{const r=await xe.getNDK(),b=["business","moomaa-tribe"];t(0,a=await Ee.fetchChannels(r,n.publicKey,b))}catch(r){console.error("Failed to load channels:",r)}finally{t(1,s=!1)}});function o(r){se(`${ae}/chat/${r}`)}const i=r=>o(r.id);return c.$$set=r=>{"data"in r&&t(3,l=r.data)},[a,s,o,l,i]}class Be extends ye{constructor(e){super(),Ce(this,e,je,Ne,_e,{data:3})}}export{Be as component,ze as universal};
//# sourceMappingURL=4.Ct2wQEZK.js.map
