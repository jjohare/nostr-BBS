{"version":3,"mappings":";kFAeA,MAAMA,EAA0B,CAC9B,gBAAiB,GACjB,UAAW,KACX,WAAY,KACZ,SAAU,KACV,UAAW,GACX,QAAS,GACT,MAAO,IACT,EAEMC,EAAgB,CAAC,eAAe,EAEtC,SAASC,GAAkB,CACzB,KAAM,CAAE,UAAAC,EAAW,IAAAC,EAAK,OAAAC,CAAA,EAAgCC,EAASN,CAAY,EAEhE,CACX,MAAMO,EAAS,aAAa,QAAQ,gBAAgB,EACpD,GAAIA,EACF,GAAI,CACF,MAAMC,EAAS,KAAK,MAAMD,CAAM,EAChCF,EAAOI,IAAU,CACf,GAAGA,EACH,GAAGD,EACH,gBAAiB,GACjB,QAASP,EAAc,SAASO,EAAO,WAAa,EAAE,GACtD,CACJ,MAAY,CACV,aAAa,WAAW,gBAAgB,CAC1C,CAEJ,CAEA,MAAO,CACL,UAAAL,EACA,QAAS,CAACO,EAAmBC,EAAoBC,IAAsB,CACrE,MAAMC,EAAW,CACf,UAAAH,EACA,WAAAC,EACA,SAAUC,GAAY,KACtB,gBAAiB,GACjB,QAASX,EAAc,SAASS,CAAS,EACzC,UAAW,GACX,MAAO,MAIP,aAAa,QAAQ,iBAAkB,KAAK,UAAU,CACpD,UAAAA,EACA,WAAAC,EACA,SAAUC,GAAY,KACvB,CAAC,EAGJP,MAAiB,CAAE,GAAGI,EAAO,GAAGI,GAAW,CAC7C,EACA,WAAaC,GAAuB,CAClCT,EAAOI,IAAU,CAAE,GAAGA,EAAO,UAAAK,GAAY,CAC3C,EACA,SAAWC,GAAkB,CAC3BV,EAAOI,IAAU,CAAE,GAAGA,EAAO,MAAAM,GAAQ,CACvC,EACA,WAAY,IAAM,CAChBV,MAAiB,CAAE,GAAGI,EAAO,MAAO,MAAO,CAC7C,EACA,OAAQ,SAAY,CAClBL,EAAIJ,CAAY,EACH,CACX,aAAa,WAAW,gBAAgB,EACxC,KAAM,CAAE,KAAAgB,CAAA,EAAS,MAAAC,EAAA,qBAAAD,CAAA,OAAM,QAAO,eAAiB,OAAAE,KAAA,eAAAF,CAAA,6CAC/CA,EAAK,GAAGG,CAAI,GAAG,CACjB,CACF,EACA,MAAO,IAAMf,EAAIJ,CAAY,EAEjC,CAEO,MAAMoB,EAAYlB,EAAA,EACZmB,EAAkBC,EAAQF,EAAWG,GAASA,EAAM,eAAe,EACnEC,EAAUF,EAAQF,EAAWG,GAASA,EAAM,OAAO","names":["initialState","ADMIN_PUBKEYS","createAuthStore","subscribe","set","update","writable","stored","parsed","state","publicKey","privateKey","mnemonic","authData","isPending","error","goto","__vitePreload","n","base","authStore","isAuthenticated","derived","$auth","isAdmin"],"ignoreList":[],"sources":["../../../../../../src/lib/stores/auth.ts"],"sourcesContent":["import { writable, derived } from 'svelte/store';\nimport type { Writable } from 'svelte/store';\nimport { browser } from '$app/environment';\nimport { base } from '$app/paths';\n\nexport interface AuthState {\n  isAuthenticated: boolean;\n  publicKey: string | null;\n  privateKey: string | null;\n  mnemonic: string | null;\n  isPending: boolean;\n  isAdmin: boolean;\n  error: string | null;\n}\n\nconst initialState: AuthState = {\n  isAuthenticated: false,\n  publicKey: null,\n  privateKey: null,\n  mnemonic: null,\n  isPending: false,\n  isAdmin: false,\n  error: null\n};\n\nconst ADMIN_PUBKEYS = ['npub1admin...']; // Configure admin pubkeys\n\nfunction createAuthStore() {\n  const { subscribe, set, update }: Writable<AuthState> = writable(initialState);\n\n  if (browser) {\n    const stored = localStorage.getItem('fairfield_keys');\n    if (stored) {\n      try {\n        const parsed = JSON.parse(stored);\n        update(state => ({\n          ...state,\n          ...parsed,\n          isAuthenticated: true,\n          isAdmin: ADMIN_PUBKEYS.includes(parsed.publicKey || '')\n        }));\n      } catch (e) {\n        localStorage.removeItem('fairfield_keys');\n      }\n    }\n  }\n\n  return {\n    subscribe,\n    setKeys: (publicKey: string, privateKey: string, mnemonic?: string) => {\n      const authData = {\n        publicKey,\n        privateKey,\n        mnemonic: mnemonic || null,\n        isAuthenticated: true,\n        isAdmin: ADMIN_PUBKEYS.includes(publicKey),\n        isPending: false,\n        error: null\n      };\n\n      if (browser) {\n        localStorage.setItem('fairfield_keys', JSON.stringify({\n          publicKey,\n          privateKey,\n          mnemonic: mnemonic || null\n        }));\n      }\n\n      update(state => ({ ...state, ...authData }));\n    },\n    setPending: (isPending: boolean) => {\n      update(state => ({ ...state, isPending }));\n    },\n    setError: (error: string) => {\n      update(state => ({ ...state, error }));\n    },\n    clearError: () => {\n      update(state => ({ ...state, error: null }));\n    },\n    logout: async () => {\n      set(initialState);\n      if (browser) {\n        localStorage.removeItem('fairfield_keys');\n        const { goto } = await import('$app/navigation');\n        goto(`${base}/`);\n      }\n    },\n    reset: () => set(initialState)\n  };\n}\n\nexport const authStore = createAuthStore();\nexport const isAuthenticated = derived(authStore, $auth => $auth.isAuthenticated);\nexport const isAdmin = derived(authStore, $auth => $auth.isAdmin);\n"],"file":"_app/immutable/chunks/DvurVfEX.js"}