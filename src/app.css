@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--color-primary: #5568d3;
		--color-primary-hover: #4456c2;
		--color-secondary: #764ba2;
		--color-success: #10b981;
		--color-error: #ef4444;
		--color-warning: #f59e0b;
		--color-info: #3b82f6;
	}

	body {
		@apply bg-base-100 text-base-content;
		font-feature-settings: 'rlig' 1, 'calt' 1;
		-webkit-tap-highlight-color: transparent;
		-webkit-overflow-scrolling: touch;
		overscroll-behavior: none;
	}

	html {
		scroll-behavior: smooth;
	}

	/* Prevent iOS zoom on input focus */
	input,
	textarea,
	select {
		font-size: 16px;
	}

	@media (min-width: 640px) {
		input,
		textarea,
		select {
			font-size: 0.875rem;
		}
	}

	/* Respect reduced motion preferences */
	@media (prefers-reduced-motion: reduce) {
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}
}

@layer components {
	/* ========================================
	   DESIGN SYSTEM - BUTTONS
	   ======================================== */

	/* Button variants - use these for consistent styling */
	.btn-icon {
		@apply btn btn-circle btn-ghost;
	}

	/* Ensure minimum touch target sizes (44x44px) for mobile accessibility */
	.btn {
		min-height: 2.75rem;
	}

	.btn-sm {
		min-height: 2rem;
		font-size: 0.875rem;
	}

	.btn-lg {
		min-height: 3.5rem;
		font-size: 1.125rem;
	}

	.btn-xs {
		min-height: 1.75rem;
		font-size: 0.75rem;
	}

	.btn-square {
		min-width: 2.75rem;
		min-height: 2.75rem;
	}

	.btn-circle {
		min-width: 2.75rem;
		min-height: 2.75rem;
	}

	/* ========================================
	   DESIGN SYSTEM - CARDS & CONTAINERS
	   ======================================== */

	.card-elevated {
		@apply card bg-base-200 shadow-xl;
	}

	/* ========================================
	   DESIGN SYSTEM - FORMS
	   ======================================== */

	.input-primary {
		@apply input input-bordered w-full;
	}

	.textarea-primary {
		@apply textarea textarea-bordered w-full;
	}

	/* Touch-friendly inputs */
	.input,
	.textarea,
	.select {
		min-height: 2.75rem;
	}

	/* ========================================
	   DESIGN SYSTEM - ACCESSIBILITY
	   ======================================== */

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}

	/* ========================================
	   DESIGN SYSTEM - SCROLLBARS
	   ======================================== */

	.scrollbar-thin {
		scrollbar-width: thin;
		scrollbar-color: theme('colors.base-300') transparent;
	}

	.scrollbar-thin::-webkit-scrollbar {
		width: 6px;
		height: 6px;
	}

	.scrollbar-thin::-webkit-scrollbar-track {
		background: transparent;
	}

	.scrollbar-thin::-webkit-scrollbar-thumb {
		@apply bg-base-300 rounded-full;
	}

	.scrollbar-thin::-webkit-scrollbar-thumb:hover {
		@apply bg-base-content/20;
	}

	/* ========================================
	   DESIGN SYSTEM - CHAT COMPONENTS
	   ======================================== */

	.message-bubble {
		@apply px-4 py-2 rounded-2xl max-w-md break-words;
	}

	.message-bubble-sent {
		@apply message-bubble bg-primary text-primary-content ml-auto;
	}

	.message-bubble-received {
		@apply message-bubble bg-base-200;
	}

	.chat-input {
		@apply textarea textarea-bordered w-full resize-none focus:textarea-primary;
		min-height: 2.5rem;
		max-height: 10rem;
	}

	/* ========================================
	   DESIGN SYSTEM - AVATARS
	   ======================================== */

	.avatar-online::after {
		content: '';
		@apply absolute bottom-0 right-0 w-3 h-3 bg-success rounded-full border-2 border-base-100;
	}

	/* ========================================
	   DESIGN SYSTEM - LOADING STATES
	   ======================================== */

	.skeleton-pulse {
		@apply animate-pulse bg-base-300 rounded;
	}
}

@layer utilities {
	.text-balance {
		text-wrap: balance;
	}

	.transition-base {
		@apply transition-all duration-300 ease-in-out;
	}

	/* Interactive card hover effects */
	.card-interactive {
		@apply transition-all duration-300 cursor-pointer;
		box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
	}

	.card-interactive:hover {
		@apply transform scale-[1.02];
		box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
		border-color: var(--color-primary);
	}

	.card-interactive:active {
		@apply scale-[0.98];
		transition-duration: 100ms;
	}

	/* Button press feedback */
	.btn:active:not(:disabled) {
		@apply scale-95;
		transition: transform 100ms ease-out;
	}

	.btn:hover:not(:disabled) {
		@apply transform scale-105;
		transition: all 200ms ease-out;
	}

	/* Enhanced input focus states */
	.input:focus,
	.textarea:focus,
	.select:focus {
		@apply shadow-lg transition-all duration-300;
		border-color: var(--color-primary);
		box-shadow: 0 0 0 3px rgba(85, 104, 211, 0.2);
	}

	/* Smooth list item hover */
	.list-item-hover {
		@apply transition-all duration-300 hover:bg-base-200 hover:pl-2;
	}

	.focus-ring {
		@apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-base-100;
	}

	/* ========================================
	   GRADIENTS & BACKGROUNDS
	   ======================================== */

	.gradient-primary {
		background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
	}

	.gradient-mesh {
		background:
			radial-gradient(at 0% 0%, rgba(85, 104, 211, 0.1) 0px, transparent 50%),
			radial-gradient(at 100% 0%, rgba(118, 75, 162, 0.1) 0px, transparent 50%),
			radial-gradient(at 100% 100%, rgba(85, 104, 211, 0.1) 0px, transparent 50%),
			radial-gradient(at 0% 100%, rgba(118, 75, 162, 0.1) 0px, transparent 50%);
	}

	.gradient-hero {
		background: linear-gradient(135deg,
			rgba(85, 104, 211, 0.05) 0%,
			rgba(118, 75, 162, 0.05) 50%,
			rgba(85, 104, 211, 0.05) 100%);
		background-size: 200% 200%;
		animation: gradient-shift 15s ease infinite;
	}

	@keyframes gradient-shift {
		0%, 100% { background-position: 0% 50%; }
		50% { background-position: 100% 50%; }
	}

	.gradient-text {
		background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.glassmorphism {
		backdrop-filter: blur(10px) saturate(180%);
		-webkit-backdrop-filter: blur(10px) saturate(180%);
		background-color: rgba(255, 255, 255, 0.75);
	}

	@media (prefers-color-scheme: dark) {
		.glassmorphism {
			background-color: rgba(30, 30, 30, 0.75);
		}
	}

	/* ========================================
	   ANIMATIONS & MICRO-INTERACTIONS
	   ======================================== */

	@keyframes shimmer {
		0% { background-position: -1000px 0; }
		100% { background-position: 1000px 0; }
	}

	.skeleton-shimmer {
		background: linear-gradient(
			90deg,
			rgba(255, 255, 255, 0) 0%,
			rgba(255, 255, 255, 0.2) 20%,
			rgba(255, 255, 255, 0.5) 60%,
			rgba(255, 255, 255, 0) 100%
		);
		background-size: 1000px 100%;
		animation: shimmer 2s infinite;
	}

	@keyframes bounce-in {
		0% { transform: scale(0); opacity: 0; }
		50% { transform: scale(1.1); }
		100% { transform: scale(1); opacity: 1; }
	}

	.animate-bounce-in {
		animation: bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
	}

	@keyframes slide-up {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.animate-slide-up {
		animation: slide-up 0.4s ease-out;
	}

	@keyframes fade-in {
		from { opacity: 0; }
		to { opacity: 1; }
	}

	.animate-fade-in {
		animation: fade-in 0.3s ease-in;
	}

	@keyframes shake {
		0%, 100% { transform: translateX(0); }
		25% { transform: translateX(-10px); }
		75% { transform: translateX(10px); }
	}

	.animate-shake {
		animation: shake 0.5s ease-in-out;
	}

	@keyframes pulse-ring {
		0% {
			transform: scale(0.8);
			opacity: 1;
		}
		100% {
			transform: scale(2);
			opacity: 0;
		}
	}

	.animate-pulse-ring {
		animation: pulse-ring 1.5s ease-out infinite;
	}

	@keyframes ripple {
		0% {
			transform: scale(0);
			opacity: 0.6;
		}
		100% {
			transform: scale(2);
			opacity: 0;
		}
	}

	.btn-ripple {
		position: relative;
		overflow: hidden;
	}

	.btn-ripple::after {
		content: '';
		position: absolute;
		top: 50%;
		left: 50%;
		width: 100%;
		height: 100%;
		background: rgba(255, 255, 255, 0.5);
		border-radius: 50%;
		transform: translate(-50%, -50%) scale(0);
		pointer-events: none;
	}

	.btn-ripple:active::after {
		animation: ripple 0.6s ease-out;
	}

	@keyframes typing-dots {
		0%, 20% { opacity: 0; }
		50% { opacity: 1; }
		100% { opacity: 0; }
	}

	.typing-indicator span {
		display: inline-block;
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: currentColor;
		animation: typing-dots 1.4s infinite;
	}

	.typing-indicator span:nth-child(2) {
		animation-delay: 0.2s;
	}

	.typing-indicator span:nth-child(3) {
		animation-delay: 0.4s;
	}

	@keyframes success-checkmark {
		0% {
			transform: scale(0) rotate(-45deg);
			opacity: 0;
		}
		50% {
			transform: scale(1.2) rotate(-45deg);
		}
		100% {
			transform: scale(1) rotate(-45deg);
			opacity: 1;
		}
	}

	.animate-checkmark {
		animation: success-checkmark 0.5s ease-out;
	}

	/* Progress bar with gradient */
	.progress-gradient {
		background: linear-gradient(
			90deg,
			var(--color-primary) 0%,
			var(--color-secondary) 100%
		);
		transition: width 0.3s ease-out;
	}

	/* Notification badge pulse */
	.badge-pulse {
		animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	}

	@keyframes pulse {
		0%, 100% {
			opacity: 1;
		}
		50% {
			opacity: 0.5;
		}
	}

	/* Avatar glow effect */
	.avatar-glow {
		box-shadow: 0 0 20px rgba(85, 104, 211, 0.6);
		animation: glow-pulse 2s ease-in-out infinite;
	}

	@keyframes glow-pulse {
		0%, 100% {
			box-shadow: 0 0 20px rgba(85, 104, 211, 0.6);
		}
		50% {
			box-shadow: 0 0 30px rgba(85, 104, 211, 0.9);
		}
	}

	/* Safe area support for iOS notch */
	@supports (padding: max(0px)) {
		.safe-top {
			padding-top: max(1rem, env(safe-area-inset-top));
		}

		.safe-bottom {
			padding-bottom: max(1rem, env(safe-area-inset-bottom));
		}

		.safe-left {
			padding-left: max(1rem, env(safe-area-inset-left));
		}

		.safe-right {
			padding-right: max(1rem, env(safe-area-inset-right));
		}
	}

	/* Better mobile scrolling */
	.mobile-scroll {
		-webkit-overflow-scrolling: touch;
		overscroll-behavior: contain;
	}

	/* Hide scrollbar but keep functionality */
	.hide-scrollbar {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}

	.hide-scrollbar::-webkit-scrollbar {
		display: none;
	}

	/* ========================================
	   MOBILE RESPONSIVE OPTIMIZATIONS
	   ======================================== */

	/* Mobile-optimized modals */
	@media (max-width: 768px) {
		.modal-box {
			max-height: 90vh !important;
			max-width: 95vw !important;
			margin: 1rem;
		}

		/* Stack content vertically on mobile */
		.modal-box > div {
			flex-direction: column !important;
		}
	}

	/* Responsive text sizing */
	@media (max-width: 640px) {
		h1 {
			font-size: 1.75rem;
		}

		h2 {
			font-size: 1.5rem;
		}

		h3 {
			font-size: 1.25rem;
		}
	}

	/* Touch-friendly spacing */
	@media (max-width: 768px) {
		.btn-group .btn {
			min-width: 44px;
			min-height: 44px;
		}

		/* Increase tap target for small elements */
		a:not(.btn),
		button:not(.btn) {
			min-height: 44px;
			display: inline-flex;
			align-items: center;
		}

		/* Reduce padding on mobile for better space usage */
		.card {
			padding: 1rem;
		}

		/* Better mobile spacing */
		.container {
			padding-left: 1rem;
			padding-right: 1rem;
		}
	}

	/* Landscape mobile optimization */
	@media (max-width: 896px) and (orientation: landscape) {
		.modal-box {
			max-height: 85vh !important;
		}

		/* Reduce padding in landscape */
		.navbar,
		.footer {
			padding: 0.5rem 1rem;
		}
	}

	/* Better focus indicators for keyboard navigation */
	*:focus-visible {
		outline: 2px solid oklch(var(--p));
		outline-offset: 2px;
	}

	/* Remove outline for mouse users */
	*:focus:not(:focus-visible) {
		outline: none;
	}

	/* Portrait orientation optimizations */
	@media (orientation: portrait) and (max-width: 768px) {
		/* Make cards full width on small portrait screens */
		.card {
			width: 100%;
		}

		/* Hide secondary sidebars */
		.sidebar-secondary {
			display: none;
		}
	}

	/* Show more button for collapsed sections */
	.show-more-mobile {
		display: none;
	}

	@media (max-width: 640px) {
		.show-more-mobile {
			display: block;
			margin-top: 1rem;
		}

		/* Collapse long lists on mobile */
		.mobile-collapse > *:nth-child(n+4) {
			display: none;
		}

		.mobile-collapse.expanded > * {
			display: block;
		}
	}

	/* Safe area for all sides (notched devices) */
	@supports (padding: env(safe-area-inset-left)) {
		.safe-area-all {
			padding-top: env(safe-area-inset-top);
			padding-right: env(safe-area-inset-right);
			padding-bottom: env(safe-area-inset-bottom);
			padding-left: env(safe-area-inset-left);
		}
	}
}
