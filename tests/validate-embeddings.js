// Validate embedding response dimensions and format
const embeddingResponse = {
  "embeddings": [[0.015455076470971107, -0.02565683424472809, 0.005386881064623594, -0.040946654975414276, 0.05309533327817917, 0.01361419353634119, -0.07531396299600601, -0.05107872933149338, -0.03570585697889328, -0.07356070727109909, 0.0054833246394991875, -0.08914816379547119, 0.10264913737773895, 0.056455910205841064, -0.04682164639234543, 0.052071504294872284, 0.04627082496881485, 0.003804591251537204, -0.017971819266676903, -0.0025076724123209715, 0.040768127888441086, 0.07585397362709045, -0.03996988385915756, -0.030999111011624336, -0.007056242786347866, -0.017249468713998795, -0.07108005881309509, -0.012169755063951015, 0.04436775669455528, -0.02405340038239956, 0.05416598916053772, -0.0016691158525645733, -0.05607948824763298, 0.08494409173727036, 0.1071254089474678, -0.006528137251734734, 0.00508506316691637, -0.010393405333161354, 0.03790685907006264, 0.02601604349911213, -0.007683987729251385, -0.07182149589061737, -0.019794374704360962, 0.04482881352305412, 0.004603028297424316, 0.028212521225214005, -0.049364227801561356, -0.08686479926109314, -0.07011664658784866, 0.05159447714686394, -0.04961806535720825, 1.1915234608750325e-05, -0.040138762444257736, -0.025396915152668953, -0.005764827132225037, -0.01541903056204319, -0.06897784024477005, -0.07700973749160767, -0.024925213307142258, -0.05498424917459488, 0.0044611659832298756, -0.04166799783706665, 0.02132485620677471, 0.05161212012171745, 0.02700943872332573, 0.016772529110312462, -0.07382721453905106, 0.008539269678294659, -0.008268216624855995, -0.05065222829580307, -0.04014371708035469, 0.013140032067894936, -0.05560702085494995, 0.08299605548381805, -0.04047944024205208, 0.06811880320310593, -0.004720443394035101, -0.05565091222524643, 0.09026669710874557, -0.08721690624952316, -0.0026106880977749825, 0.04391489923000336, 0.008604690432548523, 0.03396618738770485, 0.121675044298172, 0.07921729981899261, 0.021374985575675964, -0.0254176314920187, -0.04105505347251892, 0.02310374192893505, 0.026247866451740265, -0.10613279044628143, 0.053139571100473404, 0.11628266423940659, 0.011642515659332275, -0.027905326336622238, -0.030297720804810524, -0.015156988985836506, -0.014117909595370293, 0.06452713906764984, -0.0220818929374218, 0.035724934190511703, 0.01820915751159191, -0.04920851066708565, -0.0009486043709330261, -0.05041491612792015, -0.005162576213479042, -0.025950351729989052, -0.0056794858537614346, -0.0488116554915905, -0.02330775000154972, 0.005086113233119249, 0.0019287442555651069, -0.09936772286891937, -0.10945868492126465, 0.016529083251953125, -0.026726258918642998, -0.018218914046883583, 0.04499924182891846, -0.06111733987927437, -0.034334324300289154, -0.01119698490947485, 0.019182534888386726, -0.029316002503037453, 0.027712248265743256, -0.08830393850803375, 0.0354788601398468, 1.2706771589797413e-33, -0.007164855487644672, 0.04237847775220871, 0.032111912965774536, 0.04439588263630867, 0.05078324303030968, -0.02573598176240921, -0.08343511074781418, 0.022457875311374664, -0.11597193032503128, -0.06963150203227997, -0.00701150530949235, 0.015757735818624496, -0.048121944069862366, 0.01814226806163788, -0.011651220731437206, 0.06772151589393616, -0.03743213415145874, -8.491719199810177e-05, -0.08836548030376434, -0.02174024097621441, 0.016258830204606056, -0.008604666218161583, -0.012523534707725048, 0.035282231867313385, -0.07511301338672638, -0.01070390734821558, -0.0009035586845129728, -0.043119706213474274, 0.02062688209116459, 0.04417957738041878, -0.0870153084397316, -0.05690585821866989, 0.013123467564582825, 0.06062064692378044, 0.08274281769990921, -0.004432642832398415, -0.001336222398094833, -0.03470161184668541, -0.014366512186825275, 0.0019410906825214624, 0.009948798455297947, -0.02587180957198143, 0.005257112439721823, -0.010620741173624992, -0.02737935446202755, 0.006720660720020533, -0.008105245418846607, 0.06298980116844177, 0.013362981379032135, -0.04083060100674629, 0.02702886238694191, 0.04480206221342087, -0.04293523728847504, 0.007095716428011656, 0.014266219921410084, -0.06318116188049316, 0.02686118520796299, 0.05681164935231209, 0.02443716861307621, -0.018404556438326836, -0.008852469734847546, -0.04616523161530495, -0.016456322744488716, 0.017196891829371452, -0.09169434756040573, -0.028545154258608818, -0.036852747201919556, -0.04667332395911217, 0.0380152128636837, -0.013524245470762253, 0.03294549509882927, 0.022393735125660896, -0.046003151684999466, 0.04145166277885437, -0.044997815042734146, -0.10409236699342728, -0.02048647217452526, -0.003987020812928677, -0.019139915704727173, 0.038203150033950806, 0.028773611411452293, -0.08457228541374207, -0.06840194761753082, -0.025019193068146706, 0.008801503106951714, -0.06955426186323166, 0.04596881568431854, -0.08681511133909225, 0.00847430620342493, 0.023182133212685585, 0.013720361515879631, 0.02795562520623207, -0.038010500371456146, 0.015604829415678978, 0.05786767601966858, -1.8388553840210672e-33, -0.024142764508724213, 0.016067856922745705, 0.014899740926921368, 0.08399765938520432, -0.030960652977228165, -0.051008109003305435, 0.06078454107046127, 0.10850852727890015, -0.010541620664298534, 0.02264128252863884, 0.002676385222002864, -0.03221539780497551, 0.013647866435348988, -0.007747545838356018, -0.028818931430578232, -0.006348990835249424, -0.058294329792261124, -0.018099751323461533, 0.007008533924818039, 0.06937731057405472, 0.06389576196670532, 0.05405186861753464, -0.15789203345775604, 0.055201299488544464, 0.0368969701230526, 0.08798397332429886, 0.002715892158448696, 0.0626947209239006, -0.031312745064496994, -0.0017013411270454526, 0.03170393034815788, -0.025714334100484848, -0.0415940098464489, 0.00628877617418766, -0.06083756685256958, -0.05657418817281723, 0.1746101826429367, -0.008820929564535618, -0.04639934375882149, 0.0073891873471438885, 0.020739594474434853, 0.04156344383955002, -0.0944359302520752, -0.026855671778321266, -0.029776474460959435, 0.003395982552319765, -0.04833477362990379, -0.015128392726182938, 0.07581023871898651, -0.01750349998474121, 0.09975574165582657, 0.0001317244314122945, 0.04231557995080948, 0.0511200912296772, 0.015311230905354023, 0.03186533600091934, -0.014590735547244549, -0.010592327453196049, 0.015709269791841507, 0.0026926815044134855, 0.0024442088324576616, 0.00777914235368371, -0.02072514407336712, 0.012998031452298164, 0.0846974104642868, -0.014912506565451622, -0.02174230106174946, 0.07310735434293747, -0.07441461831331253, -0.030966222286224365, -0.015857191756367683, 0.006778170820325613, -0.03513850271701813, 0.012279991991817951, 0.08350762724876404, -0.017010893672704697, 0.05945855751633644, 0.014787895604968071, 0.04508475586771965, -0.046676572412252426, -0.02199886366724968, -0.11394073069095612, 0.13605499267578125, 0.08012498170137405, 0.037003058940172195, 0.0636925995349884, 0.07598695158958435, 0.06750477850437164, -0.07409092038869858, 0.06306685507297516, -0.033257633447647095, 0.02895427495241165, -0.03992932289838791, 0.06978195160627365, -0.012462513521313667, -2.1412462913872332e-08, -0.08877793699502945, -0.0718768760561943, -0.05674465373158455, -0.041571468114852905, -0.007621586788445711, -0.02863374724984169, 0.048878833651542664, -0.042118724435567856, 0.02255323901772499, -0.018677696585655212, 0.03354399651288986, 0.07575713098049164, -0.10929320007562637, -0.060134097933769226, 0.03556283190846443, -0.0030099493451416492, -0.017610084265470505, 0.03989745303988457, 0.003001562785357237, 0.03185245022177696, 0.028967536985874176, 0.10538492351770401, 0.07610449939966202, 0.03216477856040001, 0.0018107765354216099, -0.00536557799205184, 0.05542892962694168, 0.12729708850383759, 0.04134519025683403, -0.058323584496974945, -0.02095695771276951, 0.012579727917909622, 0.01525348611176014, -0.10274222493171692, -0.08158116787672043, 0.1621043086051941, 0.049114398658275604, -0.06072261556982994, 0.0542447529733181, -0.008490504696965218, 0.072746641933918, -0.014822558499872684, -0.11011061072349548, -0.054381873458623886, 0.09603603929281235, 0.009002948179841042, 0.017385123297572136, -0.013586565852165222, -0.034803032875061035, 0.0008874281775206327, -0.0438656285405159, -0.020627200603485107, -0.025625860318541527, 0.07109811902046204, -0.06069047003984451, -0.04576215147972107, -0.05177200213074684, 0.04470294341444969, 0.05103148892521858, -0.005803362466394901, 0.11950265616178513, 0.056524019688367844, 0.14231537282466888, -0.004664410371333361]],
  "dimensions": 384,
  "count": 1
};

// Validation checks
const validations = {
  hasEmbeddingsField: embeddingResponse.hasOwnProperty('embeddings'),
  hasCorrectDimensions: embeddingResponse.dimensions === 384,
  embeddingsIsArray: Array.isArray(embeddingResponse.embeddings),
  hasOneEmbedding: embeddingResponse.count === 1,
  firstEmbeddingIsArray: Array.isArray(embeddingResponse.embeddings[0]),
  embeddingLength: embeddingResponse.embeddings[0].length,
  correctVectorLength: embeddingResponse.embeddings[0].length === 384,
  allNumericValues: embeddingResponse.embeddings[0].every(val => typeof val === 'number'),
  hasValidRange: embeddingResponse.embeddings[0].every(val => !isNaN(val) && isFinite(val))
};

console.log('Embedding API Validation Results:');
console.log('='.repeat(50));
Object.entries(validations).forEach(([key, value]) => {
  const status = value === true || value === 384 ? '✓ PASS' : '✗ FAIL';
  console.log(`${status} - ${key}: ${value}`);
});

const allPassed = Object.entries(validations).every(([key, val]) =>
  key === 'embeddingLength' ? val === 384 : val === true
);

console.log('='.repeat(50));
console.log(allPassed ? '✓ ALL VALIDATIONS PASSED' : '✗ SOME VALIDATIONS FAILED');

process.exit(allPassed ? 0 : 1);
